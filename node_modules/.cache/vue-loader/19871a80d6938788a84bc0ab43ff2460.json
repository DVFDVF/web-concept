{"remainingRequest":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/other/game/scrolledList.vue?vue&type=style&index=0&id=d23ededc&lang=less&scoped=true","dependencies":[{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/other/game/scrolledList.vue","mtime":1716171553048},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/css-loader/dist/cjs.js","mtime":1716171609309},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1716171609792},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/postcss-loader/src/index.js","mtime":1716171609472},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/less-loader/dist/cjs.js","mtime":1716171609345},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/vue-loader-v16/dist/index.js","mtime":1716171609468}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5yZXBvcnQtdWwgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgYm90dG9tOiAwOwogIHdpZHRoOiAxMDAlOwogIG1hcmdpbi10b3A6IDE1cHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBoZWlnaHQ6IDEwMCU7CiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZS1pbi1vdXQ7Cn0K"},{"version":3,"sources":["/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/other/game/scrolledList.vue"],"names":[],"mappings":";AAuGA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,EAAE,CAAC;EACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAClC","file":"/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/other/game/scrolledList.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"position: relative\">\n    <div class=\"report-ul\" ref=\"report\">\n      <RowItem\n        v-for=\"(item, index) in relatorioData\"\n        v-bind:key=\"index\"\n        v-show=\"props.activeButton\"\n      >\n        <template v-slot:username>{{ item.username }}</template>\n        <template v-slot:userMoney>{{ item.addAmount }}</template>\n      </RowItem>\n    </div>\n    <div class=\"report-ui\" v-show=\"!props.activeButton\">\n      <RowItem v-for=\"(item, index) in originData\" v-bind:key=\"index\">\n        <template v-slot:username>{{ item.username }}</template>\n        <template v-slot:userMoney>{{ item.addAmount }}</template>\n      </RowItem>\n    </div>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport {\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  ref,\n  defineProps,\n  watch,\n} from 'vue';\nimport RowItem from '@/views/home/other/game/widget/RowItem.vue';\nimport { GetUserInviteUserResq } from './api/protocol';\nimport { getUserInviteUser } from './api';\nconst showItem = ref(0);\nconst timer = ref(0);\nconst report = ref<HTMLDivElement | null>(null);\nconst props = defineProps<{\n  activeButton: boolean;\n}>();\nlet relatorioData = reactive([] as GetUserInviteUserResq[]);\nlet originData = ref([] as GetUserInviteUserResq[]);\n// 循环生成10条数据并推送到 relatorioData 数组中\nfunction generateData() {\n  for (let i = 0; i < 50; i++) {\n    relatorioData.push({\n      username: `User****${String(Math.floor(Math.random() * 100)).padStart(\n        2,\n        '0',\n      )}`,\n      addAmount: 100,\n    });\n  }\n}\n\ngenerateData();\n\nwatch(props, (newValue) => {\n  if (!newValue.activeButton) {\n    clearInterval(timer.value);\n    getUserInviteUser().then((resp) => {\n      if (!resp) return;\n      originData.value = resp;\n    });\n  } else {\n    timer.value = setInterval(scrollList, 40);\n  }\n});\n\nfunction scrollList() {\n  // if (showItem.value > relatorioData.length - 10) {\n  //   relatorioData.push(...relatorioData);\n  // }\n  if (report.value) {\n    if (\n      report.value.scrollHeight - report.value.scrollTop ===\n      report.value.clientHeight\n    ) {\n      // 如果滚动到底部，将第一个元素移动到末尾，实现循环滚动\n      report.value.scrollTop = 0;\n    } else {\n      // 向上滚动一个元素的高度\n      let firstChild = report.value.children[0] as HTMLDivElement;\n      if (firstChild) {\n        report.value.scrollTo({\n          top: report.value.scrollTop + 4,\n          behavior: 'smooth',\n        });\n        showItem.value = Math.floor(\n          report.value.scrollTop / firstChild.offsetHeight,\n        );\n      }\n    }\n  }\n}\nonMounted(() => {\n  timer.value = setInterval(scrollList, 40);\n});\n\nonBeforeUnmount(() => {\n  clearInterval(timer.value);\n});\n</script>\n\n<style lang=\"less\" scoped>\n.report-ul {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  margin-top: 15px;\n  overflow: hidden;\n  height: 100%;\n  transition: all 0.3s ease-in-out;\n}\n</style>\n"]}]}