{"remainingRequest":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/babel-loader/lib/index.js!/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/ts-loader/index.js??ref--15-2!/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/login/googleLogin.ts","dependencies":[{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/login/googleLogin.ts","mtime":1718983777620},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/babel.config.js","mtime":1716171552917},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/babel-loader/lib/index.js","mtime":1716171609486},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/ts-loader/index.js","mtime":1716171609531},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/eslint-loader/index.js","mtime":1716171609105}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmRlbGV0ZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5oYXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuc2l6ZS5qcyI7CmltcG9ydCBkYXRhQ2VudGVyIGZyb20gJ0AvZGF0YUNlbnRlcic7CmltcG9ydCB7IHRoaXJkTG9naW4gfSBmcm9tICcuLi9hcGknOwppbXBvcnQgeyByZXBvcnRpbmdFdmVudHMsIHNoYXJlVXNlcklkIH0gZnJvbSAnQC91dGlscyc7CmltcG9ydCB7IGdldFVzZXJCYWxhbmNlIH0gZnJvbSAnLi4vYXBpL3VzZXItYXBpL2hlYWRJbmRleCc7CmltcG9ydCB7IHRva2VuQ29udHJvbGxlciB9IGZyb20gJ0AvbWFuYWdlci90b2tlbic7CmltcG9ydCB7IGdhbWVBY3RpdmUgfSBmcm9tICdAL3ZpZXdzL2FjdGl2ZSc7CmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVHb29nbGVMb2dpbigpIHsKICBpZiAod2luZG93LmFuZHJvaWQpIHsKICAgIHdpbmRvdy5hbmRyb2lkLnNlbmRNZXNzYWdlKCk7CiAgICByZXR1cm47CiAgfQogIGNvbnN0IGNsaWVudElkID0gZGF0YUNlbnRlci53ZWJDb25maWcuY2xpZW50SWQ7IC8vIOabv+aNouS4uuS9oOeahOWuouaIt+erryBJRAogIGNvbnN0IHJlZGlyZWN0VXJpID0gJ2h0dHBzOi8vdGVzdC5zZXJ2ZXIuYmV0d2Vlbjc3Ny5jb20nOyAvLyDmm7/mjaLkuLrkvaDnmoTph43lrprlkJEgVVJJCiAgY29uc3Qgc2NvcGUgPSBkYXRhQ2VudGVyLndlYkNvbmZpZy5zY29wZTsKICBjb25zdCBhdXRoVXJsID0gYGh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi92Mi9hdXRoP2NsaWVudF9pZD0ke2NsaWVudElkfSZyZWRpcmVjdF91cmk9JHtyZWRpcmVjdFVyaX0mcmVzcG9uc2VfdHlwZT1jb2RlJnNjb3BlPSR7c2NvcGV9JmFjY2Vzc190eXBlPW9ubGluZWA7CiAgbG9jYXRpb24uaHJlZiA9IGF1dGhVcmw7Cn0KLy/ojrflj5Zjb2RlCmV4cG9ydCBmdW5jdGlvbiBnZXRHb29nbGVDb2RlKGF1dGhDb2RlKSB7CiAgY29uc3QgaGFzaFBhcmFtcyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCc/JylbMV07CiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhoYXNoUGFyYW1zKTsKICBsZXQgY29kZTsKICBpZiAoYXV0aENvZGUpIHsKICAgIGNvZGUgPSBhdXRoQ29kZTsKICB9IGVsc2UgewogICAgY29kZSA9IHBhcmFtcy5nZXQoJ2NvZGUnKTsKICB9CiAgbGV0IHJlZmVyZWUgPSB1bmRlZmluZWQ7CiAgLy/liKTmlq3lrZfnrKbkuLIKICBjb25zdCB0ZXh0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1JlZmVycmFsQ29kZScpOwogIGlmICh0ZXh0KSB7CiAgICByZWZlcmVlID0gc2hhcmVVc2VySWQoZmFsc2UsIHRleHQpOwogIH0KICBjb25zdCByYW5kb21JbnRlZ2VyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOSkgKyAxOwogIGNvbnN0IHJhbmRvbVN0cmluZyA9IHJhbmRvbUludGVnZXIudG9TdHJpbmcoKTsKICBjb25zdCBwaXhlbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwaXhlbCcpOwogIGNvbnN0IGNoYW5uZWxJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjaGFubmVsSWQnKTsKICBpZiAoY29kZSAmJiAhZGF0YUNlbnRlci51c2VyLmRhdGEpIHsKICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7fSwgJycsICcvJyk7CiAgICB0aGlyZExvZ2luKCdHb29nbGUnLCBjb2RlLCByYW5kb21TdHJpbmcsICc1NScsIHJlZmVyZWUgPyByZWZlcmVlIDogdW5kZWZpbmVkLCBwaXhlbCA/IHBpeGVsIDogdW5kZWZpbmVkLCBjaGFubmVsSWQgPyBjaGFubmVsSWQgOiB1bmRlZmluZWQsIGF1dGhDb2RlID8gJ2FwcCcgOiAnd2ViJykudGhlbihkYXRhID0+IHsKICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJlcG9ydGluZ0V2ZW50cygnbG9naW4nLCBkYXRhLnBpeGVsSWQpOwogICAgICB0b2tlbkNvbnRyb2xsZXIudXBkYXRlKGRhdGEudG9rZW4sIGRhdGEuZnJlc2hUb2tlbik7CiAgICAgIGRhdGFDZW50ZXIudXNlci51cGRhdGUoZGF0YSk7CiAgICAgIGdldFVzZXJCYWxhbmNlKCkudGhlbih3YWxsZXQgPT4gewogICAgICAgIGRhdGFDZW50ZXIud2FsbGV0LnVwZGF0ZSh3YWxsZXQpOwogICAgICB9KTsKICAgICAgZGF0YUNlbnRlci5zaXRlTWVzc2FnZS5pbml0KCk7CiAgICAgIC8v5Yid5aeL5YyW5rS75YqoCiAgICAgIGdhbWVBY3RpdmUuaW5pdCgpOwogICAgfSk7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiBnb29nbGVTZXR0aW5nKCkgewogIGlmICh3aW5kb3cuYW5kcm9pZCkgewogICAgd2luZG93LmFuZHJvaWQuc2V0dGluZyhkYXRhQ2VudGVyLndlYkNvbmZpZy5hbmRyb2lkQ2xpZW50SWQpOwogIH0KfQ=="},{"version":3,"names":["dataCenter","thirdLogin","reportingEvents","shareUserId","getUserBalance","tokenController","gameActive","handleGoogleLogin","window","android","sendMessage","clientId","webConfig","redirectUri","scope","authUrl","location","href","getGoogleCode","authCode","hashParams","split","params","URLSearchParams","code","get","referee","undefined","text","localStorage","getItem","randomInteger","Math","floor","random","randomString","toString","pixel","channelId","user","data","history","pushState","then","pixelId","update","token","freshToken","wallet","siteMessage","init","googleSetting","setting","androidClientId"],"sources":["/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/login/googleLogin.ts"],"sourcesContent":["import dataCenter from '@/dataCenter';\nimport { thirdLogin } from '../api';\nimport { reportingEvents, shareUserId } from '@/utils';\nimport { getUserBalance } from '../api/user-api/headIndex';\nimport { tokenController } from '@/manager/token';\nimport { gameActive } from '@/views/active';\n\nexport function handleGoogleLogin() {\n  if ((window as any).android) {\n    (window as any).android.sendMessage();\n    return;\n  }\n  const clientId = dataCenter.webConfig.clientId; // 替换为你的客户端 ID\n  const redirectUri = 'https://test.server.between777.com'; // 替换为你的重定向 URI\n  const scope = dataCenter.webConfig.scope;\n  const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=code&scope=${scope}&access_type=online`;\n  location.href = authUrl;\n}\n//获取code\nexport function getGoogleCode(authCode?: string) {\n  const hashParams = window.location.href.split('?')[1];\n  const params = new URLSearchParams(hashParams);\n  let code;\n  if (authCode) {\n    code = authCode;\n  } else {\n    code = params.get('code');\n  }\n\n  let referee = undefined;\n  //判断字符串\n  const text = localStorage.getItem('ReferralCode') as string;\n  if (text) {\n    referee = shareUserId(false, text);\n  }\n  const randomInteger = Math.floor(Math.random() * 9) + 1;\n  const randomString = randomInteger.toString();\n  const pixel = localStorage.getItem('pixel');\n  const channelId = localStorage.getItem('channelId');\n  if (code && !dataCenter.user.data) {\n    window.history.pushState({}, '', '/');\n    thirdLogin(\n      'Google',\n      code,\n      randomString,\n      '55',\n      referee ? referee : undefined,\n      pixel ? pixel : undefined,\n      channelId ? channelId : undefined,\n      authCode ? 'app' : 'web',\n    ).then((data) => {\n      if (!data) {\n        return;\n      }\n      reportingEvents('login', data.pixelId);\n      tokenController.update(data.token, data.freshToken);\n      dataCenter.user.update(data);\n      getUserBalance().then((wallet) => {\n        dataCenter.wallet.update(wallet);\n      });\n      dataCenter.siteMessage.init();\n      //初始化活动\n      gameActive.init();\n    });\n  }\n}\nexport function googleSetting() {\n  if ((window as any).android) {\n    (window as any).android.setting(dataCenter.webConfig.androidClientId);\n  }\n}\n"],"mappings":";;;AAAA,OAAOA,UAAU,MAAM,cAAc;AACrC,SAASC,UAAU,QAAQ,QAAQ;AACnC,SAASC,eAAe,EAAEC,WAAW,QAAQ,SAAS;AACtD,SAASC,cAAc,QAAQ,2BAA2B;AAC1D,SAASC,eAAe,QAAQ,iBAAiB;AACjD,SAASC,UAAU,QAAQ,gBAAgB;AAE3C,OAAM,SAAUC,iBAAiBA,CAAA;EAC/B,IAAKC,MAAc,CAACC,OAAO,EAAE;IAC1BD,MAAc,CAACC,OAAO,CAACC,WAAW,EAAE;IACrC;;EAEF,MAAMC,QAAQ,GAAGX,UAAU,CAACY,SAAS,CAACD,QAAQ,CAAC,CAAC;EAChD,MAAME,WAAW,GAAG,oCAAoC,CAAC,CAAC;EAC1D,MAAMC,KAAK,GAAGd,UAAU,CAACY,SAAS,CAACE,KAAK;EACxC,MAAMC,OAAO,GAAG,0DAA0DJ,QAAQ,iBAAiBE,WAAW,6BAA6BC,KAAK,qBAAqB;EACrKE,QAAQ,CAACC,IAAI,GAAGF,OAAO;AACzB;AACA;AACA,OAAM,SAAUG,aAAaA,CAACC,QAAiB;EAC7C,MAAMC,UAAU,GAAGZ,MAAM,CAACQ,QAAQ,CAACC,IAAI,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACrD,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAACH,UAAU,CAAC;EAC9C,IAAII,IAAI;EACR,IAAIL,QAAQ,EAAE;IACZK,IAAI,GAAGL,QAAQ;GAChB,MAAM;IACLK,IAAI,GAAGF,MAAM,CAACG,GAAG,CAAC,MAAM,CAAC;;EAG3B,IAAIC,OAAO,GAAGC,SAAS;EACvB;EACA,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAW;EAC3D,IAAIF,IAAI,EAAE;IACRF,OAAO,GAAGvB,WAAW,CAAC,KAAK,EAAEyB,IAAI,CAAC;;EAEpC,MAAMG,aAAa,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC;EACvD,MAAMC,YAAY,GAAGJ,aAAa,CAACK,QAAQ,EAAE;EAC7C,MAAMC,KAAK,GAAGR,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMQ,SAAS,GAAGT,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EACnD,IAAIN,IAAI,IAAI,CAACxB,UAAU,CAACuC,IAAI,CAACC,IAAI,EAAE;IACjChC,MAAM,CAACiC,OAAO,CAACC,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC;IACrCzC,UAAU,CACR,QAAQ,EACRuB,IAAI,EACJW,YAAY,EACZ,IAAI,EACJT,OAAO,GAAGA,OAAO,GAAGC,SAAS,EAC7BU,KAAK,GAAGA,KAAK,GAAGV,SAAS,EACzBW,SAAS,GAAGA,SAAS,GAAGX,SAAS,EACjCR,QAAQ,GAAG,KAAK,GAAG,KAAK,CACzB,CAACwB,IAAI,CAAEH,IAAI,IAAI;MACd,IAAI,CAACA,IAAI,EAAE;QACT;;MAEFtC,eAAe,CAAC,OAAO,EAAEsC,IAAI,CAACI,OAAO,CAAC;MACtCvC,eAAe,CAACwC,MAAM,CAACL,IAAI,CAACM,KAAK,EAAEN,IAAI,CAACO,UAAU,CAAC;MACnD/C,UAAU,CAACuC,IAAI,CAACM,MAAM,CAACL,IAAI,CAAC;MAC5BpC,cAAc,EAAE,CAACuC,IAAI,CAAEK,MAAM,IAAI;QAC/BhD,UAAU,CAACgD,MAAM,CAACH,MAAM,CAACG,MAAM,CAAC;MAClC,CAAC,CAAC;MACFhD,UAAU,CAACiD,WAAW,CAACC,IAAI,EAAE;MAC7B;MACA5C,UAAU,CAAC4C,IAAI,EAAE;IACnB,CAAC,CAAC;;AAEN;AACA,OAAM,SAAUC,aAAaA,CAAA;EAC3B,IAAK3C,MAAc,CAACC,OAAO,EAAE;IAC1BD,MAAc,CAACC,OAAO,CAAC2C,OAAO,CAACpD,UAAU,CAACY,SAAS,CAACyC,eAAe,CAAC;;AAEzE"}]}