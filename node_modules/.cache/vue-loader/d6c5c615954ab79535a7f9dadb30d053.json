{"remainingRequest":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/other/game/Jiugongge.vue?vue&type=template&id=de7bf486&scoped=true&ts=true","dependencies":[{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/other/game/Jiugongge.vue","mtime":1716171553048},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/babel-loader/lib/index.js","mtime":1716171609486},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/ts-loader/index.js","mtime":1716171609531},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1716171609809},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/vue-loader-v16/dist/index.js","mtime":1716171609468}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0idGVtcGwiPgogICAgPGRpdiBjbGFzcz0iaml1ZyI+CiAgICAgIDxkaXYKICAgICAgICBjbGFzcz0iaml1Zy1hY3QiCiAgICAgICAgdi1mb3I9Iih2YWx1ZSwgaW5kZXgpIGluIG9yZGVyTGlzdCIKICAgICAgICB2LWJpbmQ6a2V5PSJpbmRleCIKICAgICAgPgogICAgICAgIDxkaXYKICAgICAgICAgIGNsYXNzPSJqaXVnLXNpbmdsZSBjZW50ZXIgaml1Zy1zaW5nbGUtcHV0IgogICAgICAgICAgOmNsYXNzPSJ7CiAgICAgICAgICAgICd3aW5uaW5nLXNsb3QnOiBzdGFydEluZGV4ID09PSB2YWx1ZS5rZXksCiAgICAgICAgICAgICdpbWFnZS1zY2FsZSc6IHN0YXJ0SW5kZXggPT09IHZhbHVlLmtleSwKICAgICAgICAgIH0iCiAgICAgICAgICB2LWlmPSJ2YWx1ZS5rZXkgIT09IDkiCiAgICAgICAgPgogICAgICAgICAgPGltZwogICAgICAgICAgICB2LWlmPSJzdGFydEluZGV4ID09PSB2YWx1ZS5rZXkiCiAgICAgICAgICAgIHNyYz0iQC9hc3NldHMvb3RoZXIvd2luYnRuLnBuZyIKICAgICAgICAgICAgY2xhc3M9Indpbm5pbmctaW1hZ2UiCiAgICAgICAgICAvPgogICAgICAgICAgPGltZyA6c3JjPSJ2YWx1ZS5pbWciIGNsYXNzPSJpbWctc2l6ZSIgLz4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2CiAgICAgICAgICB2LWVsc2UKICAgICAgICAgIGNsYXNzPSJqaXVnLXNpbmdsZSBjZW50ZXIgaml1Zy1zdGFydCBqaXVnLWRpbi1idG4gY29sLW1pZGRsZSIKICAgICAgICAgIEBjbGljaz0iaXNUdXJuID8gc3RhcnRHYW1lKCkgOiAnJyIKICAgICAgICA+CiAgICAgICAgICA8ZGl2IHYtc2hvdz0iKGRhdGFDZW50ZXIuZ3JpZE5pbmU/LmN1cnRBbW91bnQgPz8gMCkgPCAxMDAiPgogICAgICAgICAgICA8ZGl2IHYtc2hvdz0iYWRkQW1vdW50ID09ICcwJyI+CiAgICAgICAgICAgICAge3sgbGFuZy52LnNnX3N0YXJ0IH19CiAgICAgICAgICAgICAgPGRpdj57eyBncmlkTmluZT8uY291bnQgfX08L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgdi1zaG93PSJhZGRBbW91bnQgIT0gJzAnIj4KICAgICAgICAgICAgICB7eyBgKyR7YWRkQW1vdW50fWAgfX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgdi1zaG93PSIoZGF0YUNlbnRlci5ncmlkTmluZT8uY3VydEFtb3VudCA/PyAwKSA+PSAxMDAiPgogICAgICAgICAgICB7eyBsYW5nLnYuc2dfcmVjZWJlciB9fQogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8IS0tIHt7IGxhbmcudi5zZ19sb3R0ZXJ5IH19IC0tPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2Pgo="},{"version":3,"sources":["/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/other/game/Jiugongge.vue"],"names":[],"mappings":"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","file":"/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/home/other/game/Jiugongge.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"templ\">\n    <div class=\"jiug\">\n      <div\n        class=\"jiug-act\"\n        v-for=\"(value, index) in orderList\"\n        v-bind:key=\"index\"\n      >\n        <div\n          class=\"jiug-single center jiug-single-put\"\n          :class=\"{\n            'winning-slot': startIndex === value.key,\n            'image-scale': startIndex === value.key,\n          }\"\n          v-if=\"value.key !== 9\"\n        >\n          <img\n            v-if=\"startIndex === value.key\"\n            src=\"@/assets/other/winbtn.png\"\n            class=\"winning-image\"\n          />\n          <img :src=\"value.img\" class=\"img-size\" />\n        </div>\n        <div\n          v-else\n          class=\"jiug-single center jiug-start jiug-din-btn col-middle\"\n          @click=\"isTurn ? startGame() : ''\"\n        >\n          <div v-show=\"(dataCenter.gridNine?.curtAmount ?? 0) < 100\">\n            <div v-show=\"addAmount == '0'\">\n              {{ lang.v.sg_start }}\n              <div>{{ gridNine?.count }}</div>\n            </div>\n            <div v-show=\"addAmount != '0'\">\n              {{ `+${addAmount}` }}\n            </div>\n          </div>\n          <div v-show=\"(dataCenter.gridNine?.curtAmount ?? 0) >= 100\">\n            {{ lang.v.sg_receber }}\n          </div>\n          <!-- {{ lang.v.sg_lottery }} -->\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { lang } from '@/lang';\nimport { openModal } from '@/manager/view';\nimport { onUnmounted, ref, defineEmits, reactive } from 'vue';\nimport quickWithdrawal from '../quickWithdrawal.vue';\nimport { popularizes, queryUserCount } from './api';\nimport { PopularizesResq, QueryUserCountResq } from './api/protocol';\nimport dataCenter from '@/dataCenter';\nimport sharingInvitation from '@/views/share/sharingInvitation.vue';\nimport Withdraw from './widget/Withdraw.vue';\nimport { numberAddMotion } from './jiugongge';\nconst emit = defineEmits(['change']);\n/**中奖位置 0 默认不中奖 */\nconst win = ref(0);\n/**是否可以抽奖 */\nconst isTurn = ref(true);\nconst addAmount = ref('0');\nconst gridNine = ref<QueryUserCountResq | null>(null);\nconst orderList = [\n  {\n    key: 1,\n    img: require('@/assets/other/1996.png'),\n  },\n  {\n    key: 2,\n    img: require('@/assets/other/1998.png'),\n  },\n  {\n    key: 3,\n    img: require('@/assets/other/empty.png'),\n  },\n  {\n    key: 8,\n    img: require('@/assets/other/2000.png'),\n  },\n  {\n    key: 9,\n    img: require('@/assets/other/1995.png'),\n  },\n  {\n    key: 4,\n    img: require('@/assets/other/1999.png'),\n  },\n  {\n    key: 7,\n    img: require('@/assets/other/empty.png'),\n  },\n  {\n    key: 6,\n    img: require('@/assets/other/1997.png'),\n  },\n  {\n    key: 5,\n    img: require('@/assets/other/1995.png'),\n  },\n];\nlet popularizesData: PopularizesResq;\nconst timerWin = ref(0);\n/**起点位置 */\nconst startIndex = ref(0);\nlet timeArr = [50, 100, 140, 280, 350, 450, 700, 1200];\nlet runJiuData = {\n  startSpeed: 35, //起始速度\n  speed: 35, //速度\n  cynum: 64, //步数\n  timer: 0,\n  times: 0, //转动次数\n};\nfunction startGame() {\n  if (isTurn.value) {\n    isTurn.value = false;\n    if ((dataCenter.gridNine?.curtAmount ?? 0) >= 100) {\n      openModal(Withdraw, { update: queryUser });\n      isTurn.value = true;\n      return;\n    }\n    if ((dataCenter.gridNine?.count ?? 0) <= 0) {\n      openModal(sharingInvitation);\n      isTurn.value = true;\n      return;\n    }\n    popularizes().then((resp) => {\n      if (!resp) return;\n      popularizesData = resp;\n      const randomIndex = resp.index;\n      win.value = randomIndex;\n      rolling();\n    });\n  }\n}\nfunction rolling() {\n  runJiuData.times++;\n  if (startIndex.value === orderList.length - 1) {\n    startIndex.value = 1;\n  } else {\n    startIndex.value++;\n  }\n  let shouldContinueRolling = true;\n  // 检查是否应该停止滚动\n  if (\n    runJiuData.times > runJiuData.cynum + 24 &&\n    win.value === startIndex.value\n  ) {\n    clearTimeout(runJiuData.timer);\n    shouldContinueRolling = false;\n    // 设置获胜后的定时器\n    if (dataCenter.gridNine) {\n      dataCenter.gridNine.curtAmount += popularizesData.addAmount;\n      dataCenter.gridNine.count = popularizesData.count;\n      if (!dataCenter.gridNine.startTime) {\n        queryUser();\n      }\n      emit('change', popularizesData.addAmount);\n    }\n    numberAddMotion((result) => {\n      if (result) {\n        addAmount.value = result;\n        if (dataCenter.gridNine) {\n          if (parseFloat(addAmount.value) >= popularizesData.addAmount) {\n            timerWin.value = setTimeout(resetData, 1500);\n          }\n        }\n      }\n    }, popularizesData.addAmount);\n  }\n\n  // 惯性效果，让滚动速度逐渐减慢\n  let b = runJiuData.cynum + win.value + 24 - runJiuData.times;\n  if (b < 8) {\n    runJiuData.speed += (600 - 35) / 8;\n    // runJiuData.speed = timeArr[7 - b];\n  }\n\n  // 如果需要继续滚动，设置下一个定时器\n  if (shouldContinueRolling) {\n    runJiuData.timer = setTimeout(rolling, runJiuData.speed);\n  }\n}\nfunction resetData() {\n  // 数据重置\n  clearTimeout(timerWin.value);\n  startIndex.value = 0;\n  isTurn.value = true;\n  runJiuData = {\n    startSpeed: 35, //起始速度\n    speed: 35, //速度\n    cynum: 64, //步数\n    timer: 0,\n    times: 0, //转动次数\n  };\n  if (dataCenter.gridNine) {\n    if (dataCenter.gridNine.curtAmount >= 100) {\n      openModal(Withdraw, { update: queryUser });\n    }\n  }\n  if (parseFloat(addAmount.value) > 50) {\n    openModal(quickWithdrawal);\n  }\n  addAmount.value = '0';\n}\nonUnmounted(() => {\n  clearTimeout(runJiuData.timer);\n  clearTimeout(timerWin.value);\n});\nfunction queryUser() {\n  queryUserCount().then((resp) => {\n    if (resp) {\n      gridNine.value = resp;\n      dataCenter.gridNine = gridNine.value;\n      emit('change');\n    }\n  });\n}\nqueryUser();\n</script>\n\n<style lang=\"less\" scoped>\n.templ {\n  background-image: url('~@/assets/other/jiugongge.png');\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n  background-position: center center;\n  width: 500px;\n  aspect-ratio: 1;\n  padding: 45px;\n  user-select: none;\n}\n.jiug {\n  width: 100%;\n  aspect-ratio: 1;\n  display: grid;\n  gap: 6px;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(3, 1fr);\n}\n\n.jiug-act {\n  background: transform;\n  border-radius: 20px;\n  overflow: hidden;\n}\n.jiug-single {\n  width: 100%;\n  height: 100%;\n  font-size: 20px;\n  text-align: center;\n  font-family: Montserrat Variable, sans-serif;\n}\n.jiug-single-put {\n  background-color: #0c129e;\n}\n.jiug-din-btn {\n  background: linear-gradient(to bottom, #fdc86d, #fca60f);\n}\n.jiug-start {\n  cursor: pointer;\n}\n.is-win {\n  background-image: url(~@/assets/other/winbtn.png);\n  background-repeat: no-repeat;\n  background-size: 120% 120%;\n  background-position: center center;\n}\n/* 中奖图片样式 */\n.winning-slot {\n  position: relative; /* 为图片定位提供上下文 */\n}\n.winning-image {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 100%;\n  height: 100%;\n  // z-index: 10;\n  background: rgba(100, 226, 83, 0.529);\n}\n.img-size {\n  width: 40%;\n  z-index: 2;\n}\n.image-scale {\n  animation: zoomInOut 0.5s ease-in-out 2;\n}\n@keyframes zoomInOut {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.4);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@media only screen and (max-width: 767px) {\n  .templ {\n    padding: 30px;\n  }\n  .jiug-act {\n    border-radius: 12px;\n  }\n  .jiug {\n    gap: 3px;\n  }\n}\n</style>\n"]}]}