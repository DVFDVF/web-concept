{"remainingRequest":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/babel-loader/lib/index.js!/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/ts-loader/index.js??ref--15-2!/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/nuomi/Desktop/项目/concept/fury-client/src/views/home/head/notify/Notifications.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/src/views/home/head/notify/Notifications.vue","mtime":1716171553039},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/babel.config.js","mtime":1716171552917},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/babel-loader/lib/index.js","mtime":1716171609486},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/ts-loader/index.js","mtime":1716171609531},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/vue-loader-v16/dist/index.js","mtime":1716171609468}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tICdAL2FwaS9wcm90b2NvbCc7CmltcG9ydCBkYXRhQ2VudGVyIGZyb20gJ0AvZGF0YUNlbnRlcic7CmltcG9ydCB7IFJpZ2h0U2lkZUJhclN0YXRlIH0gZnJvbSAnQC9kYXRhQ2VudGVyL2xheW91dCc7CmltcG9ydCB7IGxhbmcgfSBmcm9tICdAL2xhbmcnOwppbXBvcnQgUGVyc29uYWwgZnJvbSAnQC92aWV3cy9ob21lL2hlYWQvbm90aWZ5L3dpZGdldC9QZXJzb25hbC52dWUnOwppbXBvcnQgUGxhdGZvcm0gZnJvbSAnQC92aWV3cy9ob21lL2hlYWQvbm90aWZ5L3dpZGdldC9QbGF0Zm9ybS52dWUnOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHJlZiB9IGZyb20gJ3Z1ZSc7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgUGxhdGZvcm0sCiAgICBQZXJzb25hbAogIH0sCiAgc2V0dXAoKSB7CiAgICAvL+WIh+aNoiBQbGF0Zm9ybQogICAgY29uc3QgaXNQbGF0Zm9ybSA9IHJlZihmYWxzZSk7CiAgICAvL+WIh+aNoiBVbnJlYWQKICAgIGNvbnN0IGlzVW5yZWFkID0gcmVmKGZhbHNlKTsKICAgIHJldHVybiB7CiAgICAgIGlzUGxhdGZvcm0sCiAgICAgIGlzVW5yZWFkCiAgICB9OwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxhbmcsCiAgICAgIHNlbGVjdGVkT3B0aW9uOiB0cnVlLAogICAgICBsYXlvdXQ6IGRhdGFDZW50ZXIubGF5b3V0CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy9QbGF0Zm9ybSDorqHnrpfmnKrpmIXor7vnmoTmlbAKICAgIHJlYWRDb3VudCgpIHsKICAgICAgcmV0dXJuIGRhdGFDZW50ZXIuc2l0ZU1lc3NhZ2UuZ2V0TWVzc2FnZUJ5VHlwZShNZXNzYWdlVHlwZS5QTEFURk9STSkuZmlsdGVyKGl0ZW0gPT4gaXRlbS5zdGF0dXMgPT09IDApLmxlbmd0aDsKICAgIH0sCiAgICAvL+WFqOmDqOmYheivuwogICAgbWFya0FsbEFzUmVhZCgpIHsKICAgICAgZGF0YUNlbnRlci5zaXRlTWVzc2FnZS5yZWFkQWxsKHRoaXMuaXNQbGF0Zm9ybSA/IE1lc3NhZ2VUeXBlLlBMQVRGT1JNIDogTWVzc2FnZVR5cGUuUEVSU09OQUwpOwogICAgfSwKICAgIHJlYWRNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgbWVzc2FnZS5zdGF0dXMgPSAxOwogICAgICBkYXRhQ2VudGVyLnNpdGVNZXNzYWdlLmhhdmVSZWFkTWVzc2FnZShtZXNzYWdlLmlkKTsKICAgIH0sCiAgICAvL1BlcnNvbmFsIOiuoeeul+acqumYheivu+eahOaVsAogICAgcGVyc29uYWxSZWFkQ291bnQoKSB7CiAgICAgIHJldHVybiBkYXRhQ2VudGVyLnNpdGVNZXNzYWdlLmdldE1lc3NhZ2VCeVR5cGUoTWVzc2FnZVR5cGUuUEVSU09OQUwpLmZpbHRlcihpdGVtID0+IGl0ZW0uc3RhdHVzID09PSAwKS5sZW5ndGg7CiAgICB9LAogICAgLy/kuIvmi4npgInmi6kKICAgIHVwZGF0ZVNlbGVjdGVkT3B0aW9uKG9wdGlvbikgewogICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gb3B0aW9uOwogICAgICB0aGlzLmlzVW5yZWFkID0gZmFsc2U7IC8vIOWPr+mAie+8jOmakOiXj+S4i+aLieiPnOWNlQogICAgfSwKCiAgICAvL+WFs+mXremAmuefpemhtemdogogICAgdHVybk9mZk5vdGlmaWNhdGlvbnMoKSB7CiAgICAgIGRhdGFDZW50ZXIubGF5b3V0LmNsb3NlUmlnaHQoUmlnaHRTaWRlQmFyU3RhdGUuTk9USUNFKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDojrflj5blubPlj7DmnKror7vkv6Hmga/lj6rljIXlkKsgc3RhdHVzIOS4uiAxIOeahOmhueeahOiuoeeul+WxnuaApwogICAgZmlsdGVyZWRQbGF0Zm9ybUxpc3QoKSB7CiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gZGF0YUNlbnRlci5zaXRlTWVzc2FnZS5nZXRNZXNzYWdlQnlUeXBlKE1lc3NhZ2VUeXBlLlBMQVRGT1JNKTsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb24gPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzLmZpbHRlcihpdGVtID0+IGl0ZW0uc3RhdHVzID09PSAwKTsKICAgICAgfQogICAgICByZXR1cm4gbWVzc2FnZXM7CiAgICB9LAogICAgLy8g6I635Y+W5Liq5Lq65pyq6K+75L+h5oGvIHN0YXR1cyDkuLogMSDnmoTpobnnmoTorqHnrpflsZ7mgKcKICAgIGZpbHRlcmVkUGVyc29uYWxMaXN0KCkgewogICAgICBjb25zdCBtZXNzYWdlcyA9IGRhdGFDZW50ZXIuc2l0ZU1lc3NhZ2UuZ2V0TWVzc2FnZUJ5VHlwZShNZXNzYWdlVHlwZS5QRVJTT05BTCk7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkT3B0aW9uID09PSBmYWxzZSkgewogICAgICAgIHJldHVybiBtZXNzYWdlcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnN0YXR1cyA9PT0gMCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG1lc3NhZ2VzOwogICAgfQogIH0KfSk7"},{"version":3,"names":["MessageType","dataCenter","RightSideBarState","lang","Personal","Platform","defineComponent","ref","components","setup","isPlatform","isUnread","data","selectedOption","layout","methods","readCount","siteMessage","getMessageByType","PLATFORM","filter","item","status","length","markAllAsRead","readAll","PERSONAL","readMessage","message","haveReadMessage","id","personalReadCount","updateSelectedOption","option","turnOffNotifications","closeRight","NOTICE","computed","filteredPlatformList","messages","filteredPersonalList"],"sources":["/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/nuomi/Desktop/项目/concept/fury-client/src/views/home/head/notify/Notifications.vue?vue&type=script&lang=ts"],"sourcesContent":["\nimport { Message, MessageType } from '@/api/protocol';\nimport dataCenter from '@/dataCenter';\nimport { RightSideBarState } from '@/dataCenter/layout';\nimport { lang } from '@/lang';\nimport Personal from '@/views/home/head/notify/widget/Personal.vue';\nimport Platform from '@/views/home/head/notify/widget/Platform.vue';\nimport { defineComponent, ref } from 'vue';\n\nexport default defineComponent({\n  components: {\n    Platform,\n    Personal,\n  },\n  setup() {\n    //切换 Platform\n    const isPlatform = ref(false);\n    //切换 Unread\n    const isUnread = ref(false);\n\n    return {\n      isPlatform,\n      isUnread,\n    };\n  },\n  data() {\n    return {\n      lang,\n      selectedOption: true, // 初始选项\n      layout: dataCenter.layout, //关闭通知页面\n    };\n  },\n  methods: {\n    //Platform 计算未阅读的数\n    readCount() {\n      return dataCenter.siteMessage\n        .getMessageByType(MessageType.PLATFORM)\n        .filter((item) => item.status === 0).length;\n    },\n\n    //全部阅读\n    markAllAsRead() {\n      dataCenter.siteMessage.readAll(\n        this.isPlatform ? MessageType.PLATFORM : MessageType.PERSONAL,\n      );\n    },\n    readMessage(message: Message) {\n      message.status = 1;\n      dataCenter.siteMessage.haveReadMessage(message.id);\n    },\n    //Personal 计算未阅读的数\n    personalReadCount() {\n      return dataCenter.siteMessage\n        .getMessageByType(MessageType.PERSONAL)\n        .filter((item) => item.status === 0).length;\n    },\n    //下拉选择\n    updateSelectedOption(option: boolean) {\n      this.selectedOption = option;\n      this.isUnread = false; // 可选，隐藏下拉菜单\n    },\n\n    //关闭通知页面\n    turnOffNotifications() {\n      dataCenter.layout.closeRight(RightSideBarState.NOTICE);\n    },\n  },\n  computed: {\n    // 获取平台未读信息只包含 status 为 1 的项的计算属性\n    filteredPlatformList() {\n      const messages = dataCenter.siteMessage.getMessageByType(\n        MessageType.PLATFORM,\n      );\n      if (this.selectedOption === false) {\n        return messages.filter((item) => item.status === 0);\n      }\n      return messages;\n    },\n    // 获取个人未读信息 status 为 1 的项的计算属性\n    filteredPersonalList() {\n      const messages = dataCenter.siteMessage.getMessageByType(\n        MessageType.PERSONAL,\n      );\n      if (this.selectedOption === false) {\n        return messages.filter((item) => item.status === 0);\n      }\n      return messages;\n    },\n  },\n});\n"],"mappings":"AACA,SAAkBA,WAAW,QAAQ,gBAAgB;AACrD,OAAOC,UAAU,MAAM,cAAc;AACrC,SAASC,iBAAiB,QAAQ,qBAAqB;AACvD,SAASC,IAAI,QAAQ,QAAQ;AAC7B,OAAOC,QAAQ,MAAM,8CAA8C;AACnE,OAAOC,QAAQ,MAAM,8CAA8C;AACnE,SAASC,eAAe,EAAEC,GAAG,QAAQ,KAAK;AAE1C,eAAeD,eAAe,CAAC;EAC7BE,UAAU,EAAE;IACVH,QAAQ;IACRD;GACD;EACDK,KAAKA,CAAA;IACH;IACA,MAAMC,UAAU,GAAGH,GAAG,CAAC,KAAK,CAAC;IAC7B;IACA,MAAMI,QAAQ,GAAGJ,GAAG,CAAC,KAAK,CAAC;IAE3B,OAAO;MACLG,UAAU;MACVC;KACD;EACH,CAAC;EACDC,IAAIA,CAAA;IACF,OAAO;MACLT,IAAI;MACJU,cAAc,EAAE,IAAI;MACpBC,MAAM,EAAEb,UAAU,CAACa;KACpB;EACH,CAAC;EACDC,OAAO,EAAE;IACP;IACAC,SAASA,CAAA;MACP,OAAOf,UAAU,CAACgB,WAAW,CAC1BC,gBAAgB,CAAClB,WAAW,CAACmB,QAAQ,CAAC,CACtCC,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,MAAM,KAAK,CAAC,CAAC,CAACC,MAAM;IAC/C,CAAC;IAED;IACAC,aAAaA,CAAA;MACXvB,UAAU,CAACgB,WAAW,CAACQ,OAAO,CAC5B,IAAI,CAACf,UAAU,GAAGV,WAAW,CAACmB,QAAQ,GAAGnB,WAAW,CAAC0B,QAAQ,CAC9D;IACH,CAAC;IACDC,WAAWA,CAACC,OAAgB;MAC1BA,OAAO,CAACN,MAAM,GAAG,CAAC;MAClBrB,UAAU,CAACgB,WAAW,CAACY,eAAe,CAACD,OAAO,CAACE,EAAE,CAAC;IACpD,CAAC;IACD;IACAC,iBAAiBA,CAAA;MACf,OAAO9B,UAAU,CAACgB,WAAW,CAC1BC,gBAAgB,CAAClB,WAAW,CAAC0B,QAAQ,CAAC,CACtCN,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,MAAM,KAAK,CAAC,CAAC,CAACC,MAAM;IAC/C,CAAC;IACD;IACAS,oBAAoBA,CAACC,MAAe;MAClC,IAAI,CAACpB,cAAc,GAAGoB,MAAM;MAC5B,IAAI,CAACtB,QAAQ,GAAG,KAAK,CAAC,CAAC;IACzB,CAAC;;IAED;IACAuB,oBAAoBA,CAAA;MAClBjC,UAAU,CAACa,MAAM,CAACqB,UAAU,CAACjC,iBAAiB,CAACkC,MAAM,CAAC;IACxD;GACD;EACDC,QAAQ,EAAE;IACR;IACAC,oBAAoBA,CAAA;MAClB,MAAMC,QAAQ,GAAGtC,UAAU,CAACgB,WAAW,CAACC,gBAAgB,CACtDlB,WAAW,CAACmB,QAAQ,CACrB;MACD,IAAI,IAAI,CAACN,cAAc,KAAK,KAAK,EAAE;QACjC,OAAO0B,QAAQ,CAACnB,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,MAAM,KAAK,CAAC,CAAC;;MAErD,OAAOiB,QAAQ;IACjB,CAAC;IACD;IACAC,oBAAoBA,CAAA;MAClB,MAAMD,QAAQ,GAAGtC,UAAU,CAACgB,WAAW,CAACC,gBAAgB,CACtDlB,WAAW,CAAC0B,QAAQ,CACrB;MACD,IAAI,IAAI,CAACb,cAAc,KAAK,KAAK,EAAE;QACjC,OAAO0B,QAAQ,CAACnB,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,MAAM,KAAK,CAAC,CAAC;;MAErD,OAAOiB,QAAQ;IACjB;;CAEH,CAAC"}]}