{"remainingRequest":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/babel-loader/lib/index.js!/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/ts-loader/index.js??ref--15-2!/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/concept/fury-client/src/api/fetcher.ts","dependencies":[{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/src/api/fetcher.ts","mtime":1716800867582},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/babel.config.js","mtime":1716171552917},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/babel-loader/lib/index.js","mtime":1716171609486},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/ts-loader/index.js","mtime":1716171609531},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/eslint-loader/index.js","mtime":1716171609105}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdG9rZW5Db250cm9sbGVyIH0gZnJvbSAnQC9tYW5hZ2VyL3Rva2VuJzsKaW1wb3J0IHsgZ2V0LCBwb3N0IH0gZnJvbSAnLic7CmltcG9ydCB7IEFVVE9fTE9HSU4sIFVTRVJfQlJJRUYsIFdFQl9DT05GSUcsIFNUQVRJT05fTUVTU0FHRSB9IGZyb20gJy4vcHJvdG9jb2wnOwppbXBvcnQgeyBncmVlblRvQnJhemlsIH0gZnJvbSAnQC91dGlscyc7CmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdXRvTG9naW4oKSB7CiAgY29uc3QgZnJlc2hUb2tlbiA9IHRva2VuQ29udHJvbGxlci5mcmVzaFRva2VuOwogIGlmIChmcmVzaFRva2VuKSB7CiAgICByZXR1cm4gcG9zdChBVVRPX0xPR0lOLCB7CiAgICAgIGZyZXNoVG9rZW4KICAgIH0pOwogIH0KICByZXR1cm4gdW5kZWZpbmVkOwp9CmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3ZWJDb25maWcoKSB7CiAgdHJ5IHsKICAgIHJldHVybiBhd2FpdCBnZXQoV0VCX0NPTkZJRyk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUubG9nKCfnq5nngrnphY3nva7or7fmsYLlpLHotKUnKTsKICB9Cn0KLyoqCiAqIOafpeivoueUqOaIt+eahOeugOWNleS/oeaBrwogKi8KZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5VXNlckJyaWVmKHVzZXJJZHMpIHsKICB0cnkgewogICAgcmV0dXJuIHBvc3QoVVNFUl9CUklFRiwgewogICAgICB1c2VySWRzCiAgICB9KTsKICB9IGNhdGNoIChlcnJvcikgewogICAgcmV0dXJuIFtdOwogIH0KfQovL+iOt+WPlumAmuefpeS/oeaBrwpleHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhdGlvbk1lc3NhZ2UoKSB7CiAgdHJ5IHsKICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBnZXQoU1RBVElPTl9NRVNTQUdFKTsKICAgIHJlc3AuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaXRlbS50aW1lID0gZ3JlZW5Ub0JyYXppbChpdGVtLnRpbWUpOwogICAgfSk7CiAgICByZXR1cm4gcmVzcDsKICB9IGNhdGNoIChlcnJvcikgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9Cn0="},{"version":3,"names":["tokenController","get","post","AUTO_LOGIN","USER_BRIEF","WEB_CONFIG","STATION_MESSAGE","greenToBrazil","autoLogin","freshToken","undefined","webConfig","error","console","log","queryUserBrief","userIds","stationMessage","resp","forEach","item","time"],"sources":["/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/concept/fury-client/src/api/fetcher.ts"],"sourcesContent":["import { tokenController } from '@/manager/token';\nimport { get, post } from '.';\nimport {\n  AUTO_LOGIN,\n  AutoLoginResp,\n  USER_BRIEF,\n  UserBriefReq,\n  UserBriefRespItem,\n  WEB_CONFIG,\n  WebConfigResp,\n  MessageResp,\n  STATION_MESSAGE,\n} from './protocol';\nimport { greenToBrazil } from '@/utils';\n\nexport async function autoLogin() {\n  const freshToken = tokenController.freshToken;\n  if (freshToken) {\n    return post<AutoLoginResp, { freshToken: string }>(AUTO_LOGIN, {\n      freshToken,\n    });\n  }\n  return undefined;\n}\n\nexport async function webConfig() {\n  try {\n    return await get<WebConfigResp>(WEB_CONFIG);\n  } catch (error) {\n    console.log('站点配置请求失败');\n  }\n}\n\n/**\n * 查询用户的简单信息\n */\nexport async function queryUserBrief(userIds: number[]) {\n  try {\n    return post<UserBriefRespItem[], UserBriefReq>(USER_BRIEF, {\n      userIds,\n    });\n  } catch (error) {\n    return [];\n  }\n}\n\n//获取通知信息\nexport async function stationMessage() {\n  try {\n    const resp = await get<MessageResp>(STATION_MESSAGE);\n    resp.forEach((item) => {\n      item.time = greenToBrazil(item.time);\n    });\n    return resp;\n  } catch (error) {\n    return undefined;\n  }\n}\n"],"mappings":"AAAA,SAASA,eAAe,QAAQ,iBAAiB;AACjD,SAASC,GAAG,EAAEC,IAAI,QAAQ,GAAG;AAC7B,SACEC,UAAU,EAEVC,UAAU,EAGVC,UAAU,EAGVC,eAAe,QACV,YAAY;AACnB,SAASC,aAAa,QAAQ,SAAS;AAEvC,OAAO,eAAeC,SAASA,CAAA;EAC7B,MAAMC,UAAU,GAAGT,eAAe,CAACS,UAAU;EAC7C,IAAIA,UAAU,EAAE;IACd,OAAOP,IAAI,CAAwCC,UAAU,EAAE;MAC7DM;KACD,CAAC;;EAEJ,OAAOC,SAAS;AAClB;AAEA,OAAO,eAAeC,SAASA,CAAA;EAC7B,IAAI;IACF,OAAO,MAAMV,GAAG,CAAgBI,UAAU,CAAC;GAC5C,CAAC,OAAOO,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;;AAE3B;AAEA;;;AAGA,OAAO,eAAeC,cAAcA,CAACC,OAAiB;EACpD,IAAI;IACF,OAAOd,IAAI,CAAoCE,UAAU,EAAE;MACzDY;KACD,CAAC;GACH,CAAC,OAAOJ,KAAK,EAAE;IACd,OAAO,EAAE;;AAEb;AAEA;AACA,OAAO,eAAeK,cAAcA,CAAA;EAClC,IAAI;IACF,MAAMC,IAAI,GAAG,MAAMjB,GAAG,CAAcK,eAAe,CAAC;IACpDY,IAAI,CAACC,OAAO,CAAEC,IAAI,IAAI;MACpBA,IAAI,CAACC,IAAI,GAAGd,aAAa,CAACa,IAAI,CAACC,IAAI,CAAC;IACtC,CAAC,CAAC;IACF,OAAOH,IAAI;GACZ,CAAC,OAAON,KAAK,EAAE;IACd,OAAOF,SAAS;;AAEpB"}]}