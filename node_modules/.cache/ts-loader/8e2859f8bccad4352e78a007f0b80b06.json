{"remainingRequest":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/babel-loader/lib/index.js!/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/ts-loader/index.js??ref--15-2!/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/cashback/index.ts","dependencies":[{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/cashback/index.ts","mtime":1716171553021},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/babel.config.js","mtime":1716171552917},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/babel-loader/lib/index.js","mtime":1716171609486},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/ts-loader/index.js","mtime":1716171609531},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/eslint-loader/index.js","mtime":1716171609105}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJzsKaW1wb3J0IHsgcmVhY3RpdmUsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IGdldENhc2hCYWNrLCByZWNlaXZlQ2FzaEJhY2sgfSBmcm9tICcuL2FwaSc7CmltcG9ydCB7IHRpcCB9IGZyb20gJ0AvY29tcG9uZW50cy93YXJuL3dhcm4nOwppbXBvcnQgZGF0YUNlbnRlciBmcm9tICdAL2RhdGFDZW50ZXInOwppbXBvcnQgeyBvcGVuTW9kYWwgfSBmcm9tICdAL21hbmFnZXIvdmlldyc7CmltcG9ydCBDYXNoQmFja1dlZWtUaXAgZnJvbSAnLi9jYXNoQmFja1dlZWtUaXAudnVlJzsKY2xhc3MgQ2FzaGJhY2sgewogIGNvbnN0cnVjdG9yKCkgewogICAgdGhpcy5wZXJjZW50YWdlID0gMDsKICAgIHRoaXMuZW1waXJpY2FsID0gMDsKICAgIHRoaXMuZmxpY2tlciA9IGZhbHNlOwogICAgdGhpcy5pc0FjdGl2ZSA9IHJlZihmYWxzZSk7CiAgICB0aGlzLnN0YXJ0VGltZSA9IHJlZignJyk7CiAgICB0aGlzLnRpbWVyID0gMDsKICAgIHRoaXMubGFzdENhc2hCYWNrID0gKCkgPT4gewogICAgICByZXR1cm4gTWF0aC5mbG9vcihkYXRhQ2VudGVyLndlYkNvbmZpZy5sZXZlbENvbmZpZ3NbZGF0YUNlbnRlci53ZWJDb25maWcubGV2ZWxDb25maWdzLmxlbmd0aCAtIDFdLmNhc2hCYWNrICogMTAwKTsKICAgIH07CiAgICB0aGlzLnRpcHMgPSBbJ2NhX3NlbWEnLCAnY2FfcGVyZG8nLCAnY2Ffc2VndWludGUnLCAnY2FfY2FzaGwnLCAnY2FfbWFpb3InLCAnY2FfbGltaXRlJywgJ2NhX2RpcmV0YW0nXTsKICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIHZhciBfdGhpcyRhY3Rpdml0eVRpbWVzLCBfdGhpcyRhY3Rpdml0eVRpbWVzMjsKICAgICAgdGhpcy5nZXRCcmF6aWxXZWVrRGF0ZXMoKTsKICAgICAgdGhpcy5pc0FjdGl2ZS52YWx1ZSA9IHRoaXMuaXNEdXJpbmdUaW1lKCk7CiAgICAgIHRoaXMuc3RhcnRUaW1lLnZhbHVlID0gYCR7KF90aGlzJGFjdGl2aXR5VGltZXMgPSB0aGlzLmFjdGl2aXR5VGltZXMpID09PSBudWxsIHx8IF90aGlzJGFjdGl2aXR5VGltZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGFjdGl2aXR5VGltZXMuY3VycmVudFdlZWsuc3RhcnREYXRlfX4keyhfdGhpcyRhY3Rpdml0eVRpbWVzMiA9IHRoaXMuYWN0aXZpdHlUaW1lcykgPT09IG51bGwgfHwgX3RoaXMkYWN0aXZpdHlUaW1lczIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGFjdGl2aXR5VGltZXMyLmN1cnJlbnRXZWVrLmVuZERhdGV9YDsKICAgIH0sIDEwMDApOwogIH0KICBkZXN0cm95KCkgewogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICB9CiAgZ2V0QnJhemlsV2Vla0RhdGVzKCkgewogICAgY29uc3Qgc3RhcnRUaW1lID0gJzA4OjAwOjAwJzsKICAgIGNvbnN0IGVuZFRpbWUgPSAnMjM6NTk6NTknOwogICAgLy8g6K6+572uIGRheS5qcyDkuLrlt7Topb/ml7bpl7QKICAgIGRheWpzLmxvY2FsZSgncHQtYnInKTsKICAgIC8vIOiOt+WPluW9k+WJjeaXpeacnwogICAgY29uc3QgYnJhemlsRGF0ZSA9IGRheWpzKCk7CiAgICAvLyDojrflj5blvZPliY3ml6XmnJ/nmoTmnKzlkajnmoTnrKzkuIDlpKkKICAgIGNvbnN0IGZpcnN0RGF5T2ZXZWVrID0gYnJhemlsRGF0ZS5zdGFydE9mKCd3ZWVrJykuYWRkKDEsICdkYXknKTsKICAgIC8vIOiOt+WPluW9k+WJjeaXpeacn+eahOacrOWRqOeahOacgOWQjuS4gOWkqQogICAgY29uc3QgbGFzdERheU9mV2VlayA9IGZpcnN0RGF5T2ZXZWVrLmVuZE9mKCd3ZWVrJykuc3VidHJhY3QoMSwgJ2RheScpOwogICAgLy8g6I635Y+W5LiK5LiA5ZGo55qE56ys5LiA5aSpCiAgICBjb25zdCBsYXN0V2Vla0ZpcnN0RGF5ID0gZmlyc3REYXlPZldlZWsuc3VidHJhY3QoMSwgJ3dlZWsnKTsKICAgIC8vIOiOt+WPluS4iuS4gOWRqOeahOacgOWQjuS4gOWkqQogICAgY29uc3QgbGFzdFdlZWtMYXN0RGF5ID0gbGFzdFdlZWtGaXJzdERheS5lbmRPZignd2VlaycpLmFkZCgxLCAnZGF5Jyk7CiAgICB0aGlzLmFjdGl2aXR5VGltZXMgPSB7CiAgICAgIGN1cnJlbnRXZWVrOiB7CiAgICAgICAgc3RhcnREYXRlOiBgJHtmaXJzdERheU9mV2Vlay5mb3JtYXQoJ1lZWVktTU0tREQnKX0gJHtzdGFydFRpbWV9YCwKICAgICAgICBlbmREYXRlOiBgJHtsYXN0RGF5T2ZXZWVrLmZvcm1hdCgnWVlZWS1NTS1ERCcpfSAke2VuZFRpbWV9YAogICAgICB9LAogICAgICBsYXN0V2VlazogewogICAgICAgIHN0YXJ0RGF0ZTogYCR7bGFzdFdlZWtGaXJzdERheS5mb3JtYXQoJ1lZWVktTU0tREQnKX0gJHtzdGFydFRpbWV9YCwKICAgICAgICBlbmREYXRlOiBgJHtsYXN0V2Vla0xhc3REYXkuZm9ybWF0KCdZWVlZLU1NLUREJyl9ICR7ZW5kVGltZX1gCiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gdGhpcy5hY3Rpdml0eVRpbWVzOwogIH0KICBzdWJtaXQoKSB7CiAgICBpZiAodGhpcy51c2VyQ2FzaEJhY2tSZWNvcmQpIHsKICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHsKICAgICAgICByZWNlaXZlQ2FzaEJhY2sodGhpcy51c2VyQ2FzaEJhY2tSZWNvcmQuaWQpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgICB0aXAuc3VjY2VzcyhyZXNwKTsKICAgICAgICAgICAgdGhpcy51c2VyQ2FzaEJhY2tSZWNvcmQgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgIHRoaXMuY2FzaEJhY2tDb25maWcoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aXAuZXJyb3IoJ07Do28gY2hlZ291IGEgaG9yYSBkZSByZXRpcmFkYS4nKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGlwLmVycm9yKCdWb2PDqiBhaW5kYSBuw6NvIHBhcnRpY2lwb3UgbmEgYXRpdmlkYWRlJyk7CiAgICB9CiAgfQogIGNhc2hCYWNrQ29uZmlnKCkgewogICAgZ2V0Q2FzaEJhY2soKS50aGVuKHJlc3AgPT4gewogICAgICBpZiAocmVzcCkgewogICAgICAgIHZhciBfdGhpcyRjb25maWckY2hpcCwgX3RoaXMkY29uZmlnOwogICAgICAgIHRoaXMudXNlckNhc2hCYWNrUmVjb3JkID0gcmVzcC51c2VyQ2FzaEJhY2tSZWNvcmQ7CiAgICAgICAgdGhpcy5jb25maWcgPSBkYXRhQ2VudGVyLndlYkNvbmZpZy5sZXZlbENvbmZpZ3MuZmluZChpdGVtID0+IGl0ZW0ubGV2ZWwgPT09IHJlc3AubGV2ZWwpOwogICAgICAgIC8vIOiOt+WPluW9k+WJjemhueeahOe0ouW8lQogICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IGRhdGFDZW50ZXIud2ViQ29uZmlnLmxldmVsQ29uZmlncy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmxldmVsID09PSByZXNwLmxldmVsKTsKICAgICAgICAvLyDojrflj5bkuIvkuIDpobnnmoTntKLlvJUKICAgICAgICBjb25zdCBuZXh0SW5kZXggPSBjdXJyZW50SW5kZXggPiBkYXRhQ2VudGVyLndlYkNvbmZpZy5sZXZlbENvbmZpZ3MubGVuZ3RoIC0gMSA/IGN1cnJlbnRJbmRleCA6IGN1cnJlbnRJbmRleCArIDE7CiAgICAgICAgLy8g6I635Y+W5LiL5LiA6aG56YWN572uCiAgICAgICAgdGhpcy5uZXh0Q29uZmlnID0gZGF0YUNlbnRlci53ZWJDb25maWcubGV2ZWxDb25maWdzW25leHRJbmRleF07CiAgICAgICAgdGhpcy5lbXBpcmljYWwgPSB0aGlzLm5leHRDb25maWcuY2hpcCAtIHJlc3AuZXhwOwogICAgICAgIHRoaXMucGVyY2VudGFnZSA9ICgxIC0gdGhpcy5lbXBpcmljYWwgLyAodGhpcy5uZXh0Q29uZmlnLmNoaXAgLSAoKF90aGlzJGNvbmZpZyRjaGlwID0gKF90aGlzJGNvbmZpZyA9IHRoaXMuY29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvbmZpZy5jaGlwKSAhPT0gbnVsbCAmJiBfdGhpcyRjb25maWckY2hpcCAhPT0gdm9pZCAwID8gX3RoaXMkY29uZmlnJGNoaXAgOiAwKSkpICogMTAwOwogICAgICB9CiAgICB9KTsKICB9CiAgZHVyaW5nVGltZSgpIHsKICAgIGlmICh0aGlzLmFjdGl2aXR5VGltZXMpIHsKICAgICAgZGF5anMubG9jYWxlKCdwdC1icicpOwogICAgICBjb25zdCBzdGFydCA9IGRheWpzKGAke3RoaXMuYWN0aXZpdHlUaW1lcy5jdXJyZW50V2Vlay5zdGFydERhdGV9WmApOwogICAgICBjb25zdCBlbmQgPSBkYXlqcyhgJHt0aGlzLmFjdGl2aXR5VGltZXMuY3VycmVudFdlZWsuZW5kRGF0ZX1aYCk7CiAgICAgIHJldHVybiBkYXlqcygpLmlzQmVmb3JlKGVuZCkgJiYgZGF5anMoKS5pc0FmdGVyKHN0YXJ0KTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CiAgaXNEdXJpbmdUaW1lKCkgewogICAgaWYgKHRoaXMuYWN0aXZpdHlUaW1lcykgewogICAgICByZXR1cm4gdGhpcy5kdXJpbmdUaW1lKCk7CiAgICB9CiAgICB0aGlzLmZsaWNrZXIgPSB0cnVlOwogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHRoaXMuZmxpY2tlciA9IGZhbHNlOwogICAgfSwgMjAwMCk7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIG9wZW5DYXNoYmFja1RpcHMoKSB7CiAgICBnZXRDYXNoQmFjaygpLnRoZW4ocmVzcCA9PiB7CiAgICAgIGlmIChyZXNwICE9PSBudWxsICYmIHJlc3AgIT09IHZvaWQgMCAmJiByZXNwLnVzZXJDYXNoQmFja1JlY29yZCkgewogICAgICAgIHRoaXMuZ2V0QnJhemlsV2Vla0RhdGVzKCk7CiAgICAgICAgaWYgKHRoaXMuZHVyaW5nVGltZSgpKSB7CiAgICAgICAgICBjb25zdCBicmF6aWxUaW1lID0gZGF5anMoKS51dGNPZmZzZXQoLTMpLmZvcm1hdCgnWVlZWS1NTS1ERCcpOwogICAgICAgICAgY29uc3QgdGltZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXNoYmFja1RpcHNUaW1lJyk7CiAgICAgICAgICBpZiAodGltZSAhPSBicmF6aWxUaW1lKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXNoYmFja1RpcHNUaW1lJywgYnJhemlsVGltZSk7CiAgICAgICAgICAgIG9wZW5Nb2RhbChDYXNoQmFja1dlZWtUaXApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQp9CmV4cG9ydCBjb25zdCBjYXNoYmFjayA9IHJlYWN0aXZlKG5ldyBDYXNoYmFjaygpKTs="},{"version":3,"names":["dayjs","reactive","ref","getCashBack","receiveCashBack","tip","dataCenter","openModal","CashBackWeekTip","Cashback","constructor","percentage","empirical","flicker","isActive","startTime","timer","lastCashBack","Math","floor","webConfig","levelConfigs","length","cashBack","tips","setInterval","_this$activityTimes","_this$activityTimes2","getBrazilWeekDates","value","isDuringTime","activityTimes","currentWeek","startDate","endDate","destroy","clearInterval","endTime","locale","brazilDate","firstDayOfWeek","startOf","add","lastDayOfWeek","endOf","subtract","lastWeekFirstDay","lastWeekLastDay","format","lastWeek","submit","userCashBackRecord","id","then","resp","success","undefined","cashBackConfig","error","_this$config$chip","_this$config","config","find","item","level","currentIndex","findIndex","nextIndex","nextConfig","chip","exp","duringTime","start","end","isBefore","isAfter","setTimeout","openCashbackTips","brazilTime","utcOffset","time","localStorage","getItem","setItem","cashback"],"sources":["/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/concept/web3-concept/src/views/cashback/index.ts"],"sourcesContent":["import dayjs from 'dayjs';\nimport { reactive, ref } from 'vue';\nimport { getCashBack, receiveCashBack } from './api';\nimport { tip } from '@/components/warn/warn';\nimport { Configs } from '@/api/protocol';\nimport dataCenter from '@/dataCenter';\nimport { CashBackRecord, WeekTimeRanges } from './api/protocol';\nimport en from '@/lang/en';\nimport { openModal } from '@/manager/view';\nimport CashBackWeekTip from './cashBackWeekTip.vue';\nclass Cashback {\n  public percentage = 0;\n  public config: Configs | undefined;\n  public nextConfig: Configs | undefined;\n  public empirical = 0;\n  public userCashBackRecord: CashBackRecord | undefined;\n  public activityTimes: WeekTimeRanges | undefined;\n  public flicker = false;\n  public isActive = ref(false);\n  public startTime = ref('');\n  private timer = 0;\n  public lastCashBack = () => {\n    return Math.floor(\n      dataCenter.webConfig.levelConfigs[\n        dataCenter.webConfig.levelConfigs.length - 1\n      ].cashBack * 100,\n    );\n  };\n  public tips = [\n    'ca_sema',\n    'ca_perdo',\n    'ca_seguinte',\n    'ca_cashl',\n    'ca_maior',\n    'ca_limite',\n    'ca_diretam',\n  ];\n  constructor() {\n    this.timer = setInterval(() => {\n      this.getBrazilWeekDates();\n      this.isActive.value = this.isDuringTime();\n      this.startTime.value = `${this.activityTimes?.currentWeek.startDate}~${this.activityTimes?.currentWeek.endDate}`;\n    }, 1000);\n  }\n  destroy() {\n    clearInterval(this.timer);\n  }\n  getBrazilWeekDates() {\n    const startTime = '08:00:00';\n    const endTime = '23:59:59';\n    // 设置 day.js 为巴西时间\n    dayjs.locale('pt-br');\n    // 获取当前日期\n    const brazilDate = dayjs();\n\n    // 获取当前日期的本周的第一天\n    const firstDayOfWeek = brazilDate.startOf('week').add(1, 'day');\n\n    // 获取当前日期的本周的最后一天\n    const lastDayOfWeek = firstDayOfWeek.endOf('week').subtract(1, 'day');\n\n    // 获取上一周的第一天\n    const lastWeekFirstDay = firstDayOfWeek.subtract(1, 'week');\n\n    // 获取上一周的最后一天\n    const lastWeekLastDay = lastWeekFirstDay.endOf('week').add(1, 'day');\n    this.activityTimes = {\n      currentWeek: {\n        startDate: `${firstDayOfWeek.format('YYYY-MM-DD')} ${startTime}`,\n        endDate: `${lastDayOfWeek.format('YYYY-MM-DD')} ${endTime}`,\n      },\n      lastWeek: {\n        startDate: `${lastWeekFirstDay.format('YYYY-MM-DD')} ${startTime}`,\n        endDate: `${lastWeekLastDay.format('YYYY-MM-DD')} ${endTime}`,\n      },\n    };\n    return this.activityTimes;\n  }\n  submit() {\n    if (this.userCashBackRecord) {\n      if (this.isActive) {\n        receiveCashBack(this.userCashBackRecord.id).then((resp) => {\n          if (resp) {\n            tip.success(resp);\n            this.userCashBackRecord = undefined;\n            this.cashBackConfig();\n          }\n        });\n      } else {\n        tip.error('Não chegou a hora de retirada.');\n      }\n    } else {\n      tip.error('Você ainda não participou na atividade');\n    }\n  }\n  cashBackConfig() {\n    getCashBack().then((resp) => {\n      if (resp) {\n        this.userCashBackRecord = resp.userCashBackRecord;\n        this.config = dataCenter.webConfig.levelConfigs.find(\n          (item) => item.level === resp.level,\n        );\n        // 获取当前项的索引\n        const currentIndex = dataCenter.webConfig.levelConfigs.findIndex(\n          (item) => item.level === resp.level,\n        );\n        // 获取下一项的索引\n        const nextIndex =\n          currentIndex > dataCenter.webConfig.levelConfigs.length - 1\n            ? currentIndex\n            : currentIndex + 1;\n        // 获取下一项配置\n        this.nextConfig = dataCenter.webConfig.levelConfigs[nextIndex];\n        this.empirical = this.nextConfig.chip - resp.exp;\n\n        this.percentage =\n          (1 -\n            this.empirical /\n              (this.nextConfig.chip - (this.config?.chip ?? 0))) *\n          100;\n      }\n    });\n  }\n  duringTime() {\n    if (this.activityTimes) {\n      dayjs.locale('pt-br');\n      const start = dayjs(`${this.activityTimes.currentWeek.startDate}Z`);\n      const end = dayjs(`${this.activityTimes.currentWeek.endDate}Z`);\n      return dayjs().isBefore(end) && dayjs().isAfter(start);\n    } else {\n      return false;\n    }\n  }\n  isDuringTime() {\n    if (this.activityTimes) {\n      return this.duringTime();\n    }\n    this.flicker = true;\n    setTimeout(() => {\n      this.flicker = false;\n    }, 2000);\n    return false;\n  }\n  openCashbackTips() {\n    getCashBack().then((resp) => {\n      if (resp?.userCashBackRecord) {\n        this.getBrazilWeekDates();\n        if (this.duringTime()) {\n          const brazilTime = dayjs().utcOffset(-3).format('YYYY-MM-DD');\n          const time = localStorage.getItem('cashbackTipsTime');\n          if (time != brazilTime) {\n            localStorage.setItem('cashbackTipsTime', brazilTime);\n            openModal(CashBackWeekTip);\n          }\n        }\n      }\n    });\n  }\n}\nexport const cashback = reactive(new Cashback());\n"],"mappings":"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"}]}