{"remainingRequest":"/Users/nuomi/Desktop/项目/fury-client/fury-client/node_modules/babel-loader/lib/index.js!/Users/nuomi/Desktop/项目/fury-client/fury-client/node_modules/ts-loader/index.js??ref--15-2!/Users/nuomi/Desktop/项目/fury-client/fury-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/fury-client/fury-client/src/views/redEnvelopeRain/game/index.ts","dependencies":[{"path":"/Users/nuomi/Desktop/项目/fury-client/fury-client/src/views/redEnvelopeRain/game/index.ts","mtime":1716171553052},{"path":"/Users/nuomi/Desktop/项目/fury-client/fury-client/babel.config.js","mtime":1716171552917},{"path":"/Users/nuomi/Desktop/项目/fury-client/fury-client/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/fury-client/fury-client/node_modules/babel-loader/lib/index.js","mtime":1716171609486},{"path":"/Users/nuomi/Desktop/项目/fury-client/fury-client/node_modules/ts-loader/index.js","mtime":1716171609531},{"path":"/Users/nuomi/Desktop/项目/fury-client/fury-client/node_modules/eslint-loader/index.js","mtime":1716171609105}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJzsKaW1wb3J0IFJlZEVudmVsb3BlIGZyb20gJy4vcmVkRW52ZWxvcGUnOwppbXBvcnQgeyByZWFjdGl2ZSB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IGdldFJlZFJhaW5SZWNvcmQsIGdldFVzZXJQbGF5UmVkUmFpbiB9IGZyb20gJy4uL2FwaSc7CmltcG9ydCB7IG9wZW5Nb2RhbCB9IGZyb20gJ0AvbWFuYWdlci92aWV3JzsKaW1wb3J0IFJlY2VpdmUgZnJvbSAnLi4vcmVjZWl2ZS52dWUnOwppbXBvcnQgSW5kZXggZnJvbSAnLi4vaW5kZXgudnVlJzsKY2xhc3MgUmVkRW52ZWxvcGVSYWluIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAvL+e6ouWMheaVsOmHjwogICAgdGhpcy5udW1iZXIgPSAxMDA7CiAgICB0aGlzLnRpbWVyID0gMDsKICAgIHRoaXMucmVkUmFpbkNvbmZpZ3VyYXRpb24gPSBbXTsKICAgIHRoaXMuY2FuUGxheSA9IHRydWU7CiAgICB0aGlzLnN0YXR1cyA9IHt9OwogICAgdGhpcy50eXBlID0gcmVhY3RpdmUoewogICAgICB0aW1lOiAnJywKICAgICAgaXNTdGFydDogZmFsc2UKICAgIH0pOwogIH0KICBpbml0KGNvbnRlbnQpIHsKICAgIC8v5aaC5p6c5bey5Yib5bu65bCx5LiN5YaN6YeN5paw5re75Yqg57qi5YyFCiAgICBpZiAodGhpcy5jb250ZW50KSB7CiAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5kaXYpOwogICAgICByZXR1cm4gdGhpcy5kaXY7CiAgICB9CiAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50OwogICAgdGhpcy5kaXYuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwogICAgdGhpcy5kaXYuc3R5bGUudG9wID0gJzAnOwogICAgdGhpcy5kaXYuc3R5bGUuYm90dG9tID0gJzAnOwogICAgdGhpcy5kaXYuc3R5bGUubGVmdCA9ICcwJzsKICAgIHRoaXMuZGl2LnN0eWxlLnJpZ2h0ID0gJzAnOwogICAgdGhpcy5kaXYuc3R5bGUuekluZGV4ID0gJzk5JzsKICAgIHRoaXMuZGl2LnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSAwLjRzIGVhc2UnOwogICAgdGhpcy5kcmlmdCgpOwogICAgY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLmRpdik7CiAgICByZXR1cm4gdGhpcy5kaXY7CiAgfQogIGhpZGVuUmVkUmFpbigpIHsKICAgIHRoaXMuZGl2LnN0eWxlLm9wYWNpdHkgPSAnMCc7CiAgfQogIGRyaWZ0KCkgewogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bWJlcjsgaSsrKSB7CiAgICAgIGNvbnN0IHJlZEVudmVsb3BlID0gbmV3IFJlZEVudmVsb3BlKCkuaW5pdCgpOwogICAgICB0aGlzLmRpdi5hcHBlbmRDaGlsZChyZWRFbnZlbG9wZSk7CiAgICB9CiAgfQogIC8v6K6+572u6YWN572uCiAgc2V0Q29uZmlnKCkgewogICAgZ2V0UmVkUmFpblJlY29yZCgpLnRoZW4ocmVzcCA9PiB7CiAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgdGhpcy5yZWRSYWluQ29uZmlndXJhdGlvbiA9IHJlc3A7CiAgICAgIH0KICAgIH0pOwogIH0KICAvLyDliKTmlq3ml7bpl7TmmK/lkKblnKjmjIflrprml7bpl7TojIPlm7TnmoTliY3kuKTliIbpkp/liLDnu5PmnZ/ml7bpl7QKICBpc1dpdGhpblJhbmdlKGJyYXppbFRpbWUsIHJhbmdlcykgewogICAgLy/ojrflj5blvZPliY3ml7bpl7TojIPlm7QKICAgIC8vIOiuoeeul+aAu+WIhumSn+aVsAogICAgY29uc3QgY3VycmVudE51bWJlciA9IGJyYXppbFRpbWUuaG91cigpICogNjAgKyBicmF6aWxUaW1lLm1pbnV0ZSgpOwogICAgbGV0IHR5cGUgPSB1bmRlZmluZWQ7CiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcmFuZ2VzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICBjb25zdCBzdGFydCA9IHJhbmdlc1tpbmRleF0uc3RhcnRUaW1lOwogICAgICBjb25zdCBlbmQgPSByYW5nZXNbaW5kZXhdLmVuZFRpbWU7CiAgICAgIGNvbnN0IHN0YXJ0UGFydHMgPSBzdGFydC5zcGxpdCgnOicpOwogICAgICBjb25zdCBlbmRQYXJ0cyA9IGVuZC5zcGxpdCgnOicpOwogICAgICAvLyDorqHnrpfmgLvliIbpkp/mlbAKICAgICAgY29uc3Qgc3RhcnROdW1iZXIgPSBwYXJzZUludChzdGFydFBhcnRzWzBdKSAqIDYwICsgcGFyc2VJbnQoc3RhcnRQYXJ0c1sxXSk7CiAgICAgIGNvbnN0IGVuZE51bWJlciA9IHBhcnNlSW50KGVuZFBhcnRzWzBdKSAqIDYwICsgcGFyc2VJbnQoZW5kUGFydHNbMV0pOwogICAgICAvL+WIpOaWreaYr+WQpuWcqOaXtumXtOiMg+WbtOWGhQogICAgICBpZiAoY3VycmVudE51bWJlciA+PSBzdGFydE51bWJlciAmJiBjdXJyZW50TnVtYmVyIDw9IGVuZE51bWJlcikgewogICAgICAgIGxldCB0aW1lOwogICAgICAgIC8v5bCG5pe26Ze06K6+572u5Li65LiL5qyh5byA5ZCv55qE5pe26Ze0CiAgICAgICAgaWYgKGluZGV4IDwgcmFuZ2VzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHRpbWUgPSByYW5nZXNbaW5kZXggKyAxXS5zdGFydFRpbWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRpbWUgPSByYW5nZXNbMF0uc3RhcnRUaW1lOwogICAgICAgIH0KICAgICAgICB0eXBlID0gewogICAgICAgICAgdGltZTogdGltZSwKICAgICAgICAgIGlzU3RhcnQ6IHRydWUKICAgICAgICB9OwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIC8v5Yik5pat5piv5ZCm5Zyo5YmNMeWIhumSnwogICAgICBpZiAoY3VycmVudE51bWJlciA9PSBzdGFydE51bWJlciAtIDEgJiYgYnJhemlsVGltZS5zZWNvbmQoKSA8IDYwKSB7CiAgICAgICAgdHlwZSA9IHsKICAgICAgICAgIHRpbWU6IGAwMDokeyg2MCAtIGJyYXppbFRpbWUuc2Vjb25kKCkpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gLAogICAgICAgICAgaXNTdGFydDogZmFsc2UKICAgICAgICB9OwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIC8v5aaC5p6c5bCP5LqO5bCx6LWL5YC8CiAgICAgIGlmIChjdXJyZW50TnVtYmVyIDwgc3RhcnROdW1iZXIpIHsKICAgICAgICBpZiAoIXR5cGUpIHsKICAgICAgICAgIC8v6LaF5Ye65pe26Ze05YiZ6YeN572u5Li65pyq5byA5ZCv54q25oCBCiAgICAgICAgICB0aGlzLmNhblBsYXkgPSB0cnVlOwogICAgICAgICAgdHlwZSA9IHsKICAgICAgICAgICAgdGltZTogcmFuZ2VzW2luZGV4XS5zdGFydFRpbWUsCiAgICAgICAgICAgIGlzU3RhcnQ6IGZhbHNlCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLy/lpoLmnpzliLDmnIDlkI7pg73msqHnlKjnu5PmnpzvvIzlsLHph4fnlKjnrKzkuIDkuKrml7bpl7QKICAgIGlmICghdHlwZSkgewogICAgICB0aGlzLmNhblBsYXkgPSB0cnVlOwogICAgICB0eXBlID0gewogICAgICAgIHRpbWU6IHJhbmdlc1swXS5zdGFydFRpbWUsCiAgICAgICAgaXNTdGFydDogZmFsc2UKICAgICAgfTsKICAgIH0KICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICB0aGlzLnR5cGUuaXNTdGFydCA9IHRoaXMudHlwZS5pc1N0YXJ0ICYmIHRoaXMuY2FuUGxheTsKICAgIHJldHVybiB0eXBlOwogIH0KICAvL+iOt+WPlue6ouWMhembqOa0u+WKqOaXtumXtAogIGFjdGl2aXR5VGltZSgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICBnZXRSZWRSYWluUmVjb3JkKCkudGhlbihyZXNwID0+IHsKICAgICAgaWYgKHJlc3ApIHsKICAgICAgICB0aGlzLnJlZFJhaW5Db25maWd1cmF0aW9uID0gcmVzcDsKICAgICAgICBjb25zdCBiZWdpbk1vbnRoID0gcmVzcC5maW5kKGl0ZW0gPT4gaXRlbS50eXBlID09PSAxKTsKICAgICAgICBjb25zdCB3ZWVrZW5kID0gcmVzcC5maW5kKGl0ZW0gPT4gaXRlbS50eXBlID09PSAyKTsKICAgICAgICBjb25zdCBvcmlnaW4gPSByZXNwLmZpbmQoaXRlbSA9PiBpdGVtLnR5cGUgPT09IDMpOwogICAgICAgIGdldFVzZXJQbGF5UmVkUmFpbigpLnRoZW4oY2FuUGxheSA9PiB7CiAgICAgICAgICBpZiAoY2FuUGxheSA9PSBudWxsIHx8IGNhblBsYXkgPT0gdW5kZWZpbmVkKSByZXR1cm47CiAgICAgICAgICB0aGlzLmNhblBsYXkgPSBjYW5QbGF5OwogICAgICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgdmFyIF9iZWdpbk1vbnRoJGVuZERhdGUsIF93ZWVrZW5kJGRheU9mV2VlazsKICAgICAgICAgICAgLy8g6I635Y+W5b2T5YmN5pel5pyfCiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF5anMoKS50eignQW1lcmljYS9TYW9fUGF1bG8nKTsKICAgICAgICAgICAgLy8g5qOA5p+l5pel5pyf5piv5ZCm5Zyo5q+P5pyI55qEMeWPt+WIsDflj7fkuYvpl7QKICAgICAgICAgICAgY29uc3QgZGF5T2ZNb250aCA9IGN1cnJlbnREYXRlLmRhdGUoKTsKICAgICAgICAgICAgY29uc3QgaXNGaXJzdFdlZWsgPSBkYXlPZk1vbnRoID49IDEgJiYgZGF5T2ZNb250aCA8PSAoKF9iZWdpbk1vbnRoJGVuZERhdGUgPSBiZWdpbk1vbnRoID09PSBudWxsIHx8IGJlZ2luTW9udGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJlZ2luTW9udGguZW5kRGF0ZSkgIT09IG51bGwgJiYgX2JlZ2luTW9udGgkZW5kRGF0ZSAhPT0gdm9pZCAwID8gX2JlZ2luTW9udGgkZW5kRGF0ZSA6IDcpOwogICAgICAgICAgICAvLyDliKTmlq3lvZPliY3ml6XmnJ/mmK/lkKbkuLrlkajkupTjgIHlkajlha3miJbogIXlkajml6UKICAgICAgICAgICAgbGV0IHJhbmdlID0gW107CiAgICAgICAgICAgIGlmIChpc0ZpcnN0V2VlaykgewogICAgICAgICAgICAgIHZhciBfYmVnaW5Nb250aCRyZWRSYWluTGk7CiAgICAgICAgICAgICAgcmFuZ2UgPSAoX2JlZ2luTW9udGgkcmVkUmFpbkxpID0gYmVnaW5Nb250aCA9PT0gbnVsbCB8fCBiZWdpbk1vbnRoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiZWdpbk1vbnRoLnJlZFJhaW5MaXN0KSAhPT0gbnVsbCAmJiBfYmVnaW5Nb250aCRyZWRSYWluTGkgIT09IHZvaWQgMCA/IF9iZWdpbk1vbnRoJHJlZFJhaW5MaSA6IFtdOwogICAgICAgICAgICB9IGVsc2UgaWYgKCgoX3dlZWtlbmQkZGF5T2ZXZWVrID0gd2Vla2VuZCA9PT0gbnVsbCB8fCB3ZWVrZW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3ZWVrZW5kLmRheU9mV2VlaykgIT09IG51bGwgJiYgX3dlZWtlbmQkZGF5T2ZXZWVrICE9PSB2b2lkIDAgPyBfd2Vla2VuZCRkYXlPZldlZWsgOiBbXSkuaW5jbHVkZXMoY3VycmVudERhdGUuZGF5KCkpKSB7CiAgICAgICAgICAgICAgdmFyIF93ZWVrZW5kJHJlZFJhaW5MaXN0OwogICAgICAgICAgICAgIHJhbmdlID0gKF93ZWVrZW5kJHJlZFJhaW5MaXN0ID0gd2Vla2VuZCA9PT0gbnVsbCB8fCB3ZWVrZW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3ZWVrZW5kLnJlZFJhaW5MaXN0KSAhPT0gbnVsbCAmJiBfd2Vla2VuZCRyZWRSYWluTGlzdCAhPT0gdm9pZCAwID8gX3dlZWtlbmQkcmVkUmFpbkxpc3QgOiBbXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgX29yaWdpbiRyZWRSYWluTGlzdDsKICAgICAgICAgICAgICByYW5nZSA9IChfb3JpZ2luJHJlZFJhaW5MaXN0ID0gb3JpZ2luID09PSBudWxsIHx8IG9yaWdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3JpZ2luLnJlZFJhaW5MaXN0KSAhPT0gbnVsbCAmJiBfb3JpZ2luJHJlZFJhaW5MaXN0ICE9PSB2b2lkIDAgPyBfb3JpZ2luJHJlZFJhaW5MaXN0IDogW107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSB0aGlzLmlzV2l0aGluUmFuZ2UoY3VycmVudERhdGUsIHJhbmdlKTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9CiAgLy8g6K6h566X6Led56a75LiL5LiA5Liq5Y2I5aSc55qE5q+r56eS5pWwCiAgZ2V0VGltZVVudGlsTmV4dE1pZG5pZ2h0KCkgewogICAgY29uc3Qgbm93ID0gZGF5anMoKS50eignQW1lcmljYS9TYW9fUGF1bG8nKTsKICAgIGNvbnN0IG1pZG5pZ2h0ID0gbm93LmVuZE9mKCdkYXknKTsKICAgIHJldHVybiBtaWRuaWdodC5kaWZmKG5vdyk7CiAgfQogIC8vIOWIt+aWsOmFjee9rgogIHJlZnJlc2hDb25maWd1cmF0aW9uKCkgewogICAgY29uc3QgdGltZVVudGlsTmV4dE1pZG5pZ2h0ID0gdGhpcy5nZXRUaW1lVW50aWxOZXh0TWlkbmlnaHQoKTsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICB0aGlzLnNldENvbmZpZygpOwogICAgICB0aGlzLnJlZnJlc2hDb25maWd1cmF0aW9uKCk7IC8vIOmAkuW9kuiwg+eUqO+8jOS7peS+v+WcqOaJp+ihjOWQjue7p+e7reWuieaOkuS4i+S4gOS4quWNiOWknOaJp+ihjAogICAgfSwgdGltZVVudGlsTmV4dE1pZG5pZ2h0KTsKICB9CiAgb3BlbigpIHsKICAgIGlmICh0aGlzLnN0YXR1cykgewogICAgICBpZiAodGhpcy5zdGF0dXMuaXNTdGFydCAmJiB0aGlzLmNhblBsYXkpIHsKICAgICAgICBvcGVuTW9kYWwoUmVjZWl2ZSwgewogICAgICAgICAgaGlkZUNsb3NlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIG9wZW5Nb2RhbChJbmRleCwgewogICAgICAgIGhpZGVDbG9zZTogdHJ1ZSwKICAgICAgICB0aW1lOiB0aGlzLnN0YXR1cy50aW1lCiAgICAgIH0pOwogICAgfQogIH0KfQpleHBvcnQgY29uc3QgcmVkRW52ZWxvcGVSYWluID0gcmVhY3RpdmUobmV3IFJlZEVudmVsb3BlUmFpbigpKTs="},{"version":3,"names":["dayjs","RedEnvelope","reactive","getRedRainRecord","getUserPlayRedRain","openModal","Receive","Index","RedEnvelopeRain","constructor","div","document","createElement","number","timer","redRainConfiguration","canPlay","status","type","time","isStart","init","content","appendChild","style","position","top","bottom","left","right","zIndex","transition","drift","hidenRedRain","opacity","i","redEnvelope","setConfig","then","resp","isWithinRange","brazilTime","ranges","currentNumber","hour","minute","undefined","index","length","start","startTime","end","endTime","startParts","split","endParts","startNumber","parseInt","endNumber","second","toString","padStart","activityTime","clearInterval","beginMonth","find","item","weekend","origin","setInterval","_beginMonth$endDate","_weekend$dayOfWeek","currentDate","tz","dayOfMonth","date","isFirstWeek","endDate","range","_beginMonth$redRainLi","redRainList","dayOfWeek","includes","day","_weekend$redRainList","_origin$redRainList","getTimeUntilNextMidnight","now","midnight","endOf","diff","refreshConfiguration","timeUntilNextMidnight","setTimeout","open","hideClose","redEnvelopeRain"],"sources":["/Users/nuomi/Desktop/项目/fury-client/fury-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/fury-client/fury-client/src/views/redEnvelopeRain/game/index.ts"],"sourcesContent":["import dayjs from 'dayjs';\nimport RedEnvelope from './redEnvelope';\nimport { reactive, ref } from 'vue';\nimport { getRedRainRecord, getUserPlayRedRain } from '../api';\nimport { RedRain, RuleResp } from '../api/protocol';\nimport { openModal } from '@/manager/view';\nimport Receive from '../receive.vue';\nimport Index from '../index.vue';\nexport interface redEnvelopeType {\n  time: string;\n  isStart?: boolean;\n}\nclass RedEnvelopeRain {\n  private div = document.createElement('div');\n  //红包数量\n  private number = 100;\n  private content: HTMLElement | undefined;\n  private timer = 0;\n  public redRainConfiguration: RuleResp[] = [];\n  public canPlay = true;\n  public status = {} as redEnvelopeType;\n  public type = reactive<redEnvelopeType>({\n    time: '',\n    isStart: false,\n  });\n  init(content: HTMLElement) {\n    //如果已创建就不再重新添加红包\n    if (this.content) {\n      content.appendChild(this.div);\n      return this.div;\n    }\n    this.content = content;\n    this.div.style.position = 'fixed';\n    this.div.style.top = '0';\n    this.div.style.bottom = '0';\n    this.div.style.left = '0';\n    this.div.style.right = '0';\n    this.div.style.zIndex = '99';\n    this.div.style.transition = 'opacity 0.4s ease';\n    this.drift();\n    content.appendChild(this.div);\n    return this.div;\n  }\n  hidenRedRain() {\n    this.div.style.opacity = '0';\n  }\n  drift() {\n    for (let i = 0; i < this.number; i++) {\n      const redEnvelope = new RedEnvelope().init();\n      this.div.appendChild(redEnvelope);\n    }\n  }\n\n  //设置配置\n  setConfig() {\n    getRedRainRecord().then((resp) => {\n      if (resp) {\n        this.redRainConfiguration = resp;\n      }\n    });\n  }\n\n  // 判断时间是否在指定时间范围的前两分钟到结束时间\n  isWithinRange(brazilTime: dayjs.Dayjs, ranges: RedRain[]) {\n    //获取当前时间范围\n\n    // 计算总分钟数\n    const currentNumber = brazilTime.hour() * 60 + brazilTime.minute();\n    let type: redEnvelopeType | undefined = undefined;\n    for (let index = 0; index < ranges.length; index++) {\n      const start = ranges[index].startTime;\n      const end = ranges[index].endTime;\n      const startParts = start.split(':');\n      const endParts = end.split(':');\n      // 计算总分钟数\n      const startNumber =\n        parseInt(startParts[0]) * 60 + parseInt(startParts[1]);\n      const endNumber = parseInt(endParts[0]) * 60 + parseInt(endParts[1]);\n      //判断是否在时间范围内\n      if (currentNumber >= startNumber && currentNumber <= endNumber) {\n        let time;\n        //将时间设置为下次开启的时间\n        if (index < ranges.length - 1) {\n          time = ranges[index + 1].startTime;\n        } else {\n          time = ranges[0].startTime;\n        }\n        type = {\n          time: time,\n          isStart: true,\n        };\n        break;\n      }\n      //判断是否在前1分钟\n      if (currentNumber == startNumber - 1 && brazilTime.second() < 60) {\n        type = {\n          time: `00:${(60 - brazilTime.second()).toString().padStart(2, '0')}`,\n          isStart: false,\n        };\n        break;\n      }\n      //如果小于就赋值\n      if (currentNumber < startNumber) {\n        if (!type) {\n          //超出时间则重置为未开启状态\n          this.canPlay = true;\n          type = {\n            time: ranges[index].startTime,\n            isStart: false,\n          };\n        }\n      }\n    }\n    //如果到最后都没用结果，就采用第一个时间\n    if (!type) {\n      this.canPlay = true;\n      type = {\n        time: ranges[0].startTime,\n        isStart: false,\n      };\n    }\n    this.type = type;\n    this.type.isStart = this.type.isStart && this.canPlay;\n    return type;\n  }\n  //获取红包雨活动时间\n  activityTime() {\n    clearInterval(this.timer);\n    getRedRainRecord().then((resp) => {\n      if (resp) {\n        this.redRainConfiguration = resp;\n        const beginMonth = resp.find((item) => item.type === 1);\n        const weekend = resp.find((item) => item.type === 2);\n        const origin = resp.find((item) => item.type === 3);\n        getUserPlayRedRain().then((canPlay) => {\n          if (canPlay == null || canPlay == undefined) return;\n          this.canPlay = canPlay;\n          this.timer = setInterval(() => {\n            // 获取当前日期\n            const currentDate = dayjs().tz('America/Sao_Paulo');\n            // 检查日期是否在每月的1号到7号之间\n            const dayOfMonth = currentDate.date();\n            const isFirstWeek =\n              dayOfMonth >= 1 && dayOfMonth <= (beginMonth?.endDate ?? 7);\n            // 判断当前日期是否为周五、周六或者周日\n            let range = [];\n            if (isFirstWeek) {\n              range = beginMonth?.redRainList ?? [];\n            } else if ((weekend?.dayOfWeek ?? []).includes(currentDate.day())) {\n              range = weekend?.redRainList ?? [];\n            } else {\n              range = origin?.redRainList ?? [];\n            }\n            this.status = this.isWithinRange(currentDate, range);\n          }, 1000);\n        });\n      }\n    });\n  }\n\n  // 计算距离下一个午夜的毫秒数\n  getTimeUntilNextMidnight() {\n    const now = dayjs().tz('America/Sao_Paulo');\n    const midnight = now.endOf('day');\n    return midnight.diff(now);\n  }\n  // 刷新配置\n  refreshConfiguration() {\n    const timeUntilNextMidnight = this.getTimeUntilNextMidnight();\n    setTimeout(() => {\n      this.setConfig();\n      this.refreshConfiguration(); // 递归调用，以便在执行后继续安排下一个午夜执行\n    }, timeUntilNextMidnight);\n  }\n  open() {\n    if (this.status) {\n      if (this.status.isStart && this.canPlay) {\n        openModal(Receive, { hideClose: true });\n        return;\n      }\n      openModal(Index, {\n        hideClose: true,\n        time: this.status.time,\n      });\n    }\n  }\n}\nexport const redEnvelopeRain = reactive(new RedEnvelopeRain());\n"],"mappings":"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"}]}