{"remainingRequest":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/babel-loader/lib/index.js!/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/ts-loader/index.js??ref--15-2!/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/concept/fury-client/src/manager/FrameManager.ts","dependencies":[{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/src/manager/FrameManager.ts","mtime":1716171553014},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/babel.config.js","mtime":1716171552917},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/babel-loader/lib/index.js","mtime":1716171609486},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/ts-loader/index.js","mtime":1716171609531},{"path":"/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/eslint-loader/index.js","mtime":1716171609105}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmNsYXNzIEZyYW1lTWFuYWdlciB7CiAgY29uc3RydWN0b3IoKSB7CiAgICB0aGlzLnVwZGF0ZXJzID0gW107CiAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTsKICAgIHRoaXMudGltZSA9IDA7CiAgICB0aGlzLnVwZGF0ZSA9ICgpID0+IHsKICAgICAgaWYgKCF0aGlzLnJ1bm5pbmcpIHJldHVybjsKICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgY29uc3QgZHQgPSBub3cgLSB0aGlzLnRpbWU7CiAgICAgIHRoaXMudGltZSA9IG5vdzsKICAgICAgdGhpcy51cGRhdGVycy5mb3JFYWNoKHVwZGF0ZXIgPT4gdXBkYXRlci51cGRhdGUoZHQpKTsKICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlKTsKICAgIH07CiAgfQogIHJlZ2lzdGVyKHVwZGF0ZXIpIHsKICAgIGlmICh0aGlzLnVwZGF0ZXJzLmluY2x1ZGVzKHVwZGF0ZXIpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMudXBkYXRlcnMucHVzaCh1cGRhdGVyKTsKICAgIHRoaXMuc3RhcnQoKTsKICB9CiAgdW5yZWdpc3Rlcih1cGRhdGVyKSB7CiAgICBjb25zdCBpbmRleCA9IHRoaXMudXBkYXRlcnMuaW5kZXhPZih1cGRhdGVyKTsKICAgIGlmIChpbmRleCA+PSAwKSB7CiAgICAgIHRoaXMudXBkYXRlcnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgaWYgKHRoaXMudXBkYXRlcnMubGVuZ3RoIDwgMSkgewogICAgICAgIHRoaXMuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfQogIHN0YXJ0KCkgewogICAgaWYgKHRoaXMucnVubmluZykgcmV0dXJuOwogICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTsKICAgIHRoaXMudGltZSA9IERhdGUubm93KCk7CiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUpOwogIH0KICBzdG9wKCkgewogICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgfQp9CmV4cG9ydCBjb25zdCBmcmFtZU1hbmFnZXIgPSBuZXcgRnJhbWVNYW5hZ2VyKCk7CmV4cG9ydCBjbGFzcyBVcGRhdGVyIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHRoaXMuZXNwVGltZSA9IDA7CiAgfQogIHVwZGF0ZShlc3QpIHsKICAgIHRoaXMuZXNwVGltZSArPSBlc3Q7CiAgfQogIHJlZ2lzdGVyKCkgewogICAgdGhpcy5lc3BUaW1lID0gMDsKICAgIGZyYW1lTWFuYWdlci5yZWdpc3Rlcih0aGlzKTsKICB9CiAgdW5yZWdpc3RlcigpIHsKICAgIGZyYW1lTWFuYWdlci51bnJlZ2lzdGVyKHRoaXMpOwogIH0KfQ=="},{"version":3,"names":["FrameManager","constructor","updaters","running","time","update","now","Date","dt","forEach","updater","requestAnimationFrame","register","includes","push","start","unregister","index","indexOf","splice","length","stop","frameManager","Updater","espTime","est"],"sources":["/Users/nuomi/Desktop/项目/concept/fury-client/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/concept/fury-client/src/manager/FrameManager.ts"],"sourcesContent":["class FrameManager {\n  private updaters: Updater[] = [];\n  private running = false;\n  private time = 0;\n  register(updater: Updater) {\n    if (this.updaters.includes(updater)) {\n      return;\n    }\n    this.updaters.push(updater);\n    this.start();\n  }\n  unregister(updater: Updater) {\n    const index = this.updaters.indexOf(updater);\n    if (index >= 0) {\n      this.updaters.splice(index, 1);\n      if (this.updaters.length < 1) {\n        this.stop();\n      }\n    }\n  }\n  private start() {\n    if (this.running) return;\n    this.running = true;\n    this.time = Date.now();\n    requestAnimationFrame(this.update);\n  }\n  private stop() {\n    this.running = false;\n  }\n  private update = () => {\n    if (!this.running) return;\n    const now = Date.now();\n    const dt = now - this.time;\n    this.time = now;\n    this.updaters.forEach((updater) => updater.update(dt));\n    requestAnimationFrame(this.update);\n  };\n}\n\nexport const frameManager = new FrameManager();\n\nexport class Updater {\n  protected espTime = 0;\n  update(est: number) {\n    this.espTime += est;\n  }\n  register() {\n    this.espTime = 0;\n    frameManager.register(this);\n  }\n  unregister() {\n    frameManager.unregister(this);\n  }\n}\n"],"mappings":";AAAA,MAAMA,YAAY;EAAlBC,YAAA;IACU,KAAAC,QAAQ,GAAc,EAAE;IACxB,KAAAC,OAAO,GAAG,KAAK;IACf,KAAAC,IAAI,GAAG,CAAC;IA0BR,KAAAC,MAAM,GAAG,MAAK;MACpB,IAAI,CAAC,IAAI,CAACF,OAAO,EAAE;MACnB,MAAMG,GAAG,GAAGC,IAAI,CAACD,GAAG,EAAE;MACtB,MAAME,EAAE,GAAGF,GAAG,GAAG,IAAI,CAACF,IAAI;MAC1B,IAAI,CAACA,IAAI,GAAGE,GAAG;MACf,IAAI,CAACJ,QAAQ,CAACO,OAAO,CAAEC,OAAO,IAAKA,OAAO,CAACL,MAAM,CAACG,EAAE,CAAC,CAAC;MACtDG,qBAAqB,CAAC,IAAI,CAACN,MAAM,CAAC;IACpC,CAAC;EACH;EAjCEO,QAAQA,CAACF,OAAgB;IACvB,IAAI,IAAI,CAACR,QAAQ,CAACW,QAAQ,CAACH,OAAO,CAAC,EAAE;MACnC;;IAEF,IAAI,CAACR,QAAQ,CAACY,IAAI,CAACJ,OAAO,CAAC;IAC3B,IAAI,CAACK,KAAK,EAAE;EACd;EACAC,UAAUA,CAACN,OAAgB;IACzB,MAAMO,KAAK,GAAG,IAAI,CAACf,QAAQ,CAACgB,OAAO,CAACR,OAAO,CAAC;IAC5C,IAAIO,KAAK,IAAI,CAAC,EAAE;MACd,IAAI,CAACf,QAAQ,CAACiB,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;MAC9B,IAAI,IAAI,CAACf,QAAQ,CAACkB,MAAM,GAAG,CAAC,EAAE;QAC5B,IAAI,CAACC,IAAI,EAAE;;;EAGjB;EACQN,KAAKA,CAAA;IACX,IAAI,IAAI,CAACZ,OAAO,EAAE;IAClB,IAAI,CAACA,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,IAAI,GAAGG,IAAI,CAACD,GAAG,EAAE;IACtBK,qBAAqB,CAAC,IAAI,CAACN,MAAM,CAAC;EACpC;EACQgB,IAAIA,CAAA;IACV,IAAI,CAAClB,OAAO,GAAG,KAAK;EACtB;;AAWF,OAAO,MAAMmB,YAAY,GAAG,IAAItB,YAAY,EAAE;AAE9C,OAAM,MAAOuB,OAAO;EAApBtB,YAAA;IACY,KAAAuB,OAAO,GAAG,CAAC;EAWvB;EAVEnB,MAAMA,CAACoB,GAAW;IAChB,IAAI,CAACD,OAAO,IAAIC,GAAG;EACrB;EACAb,QAAQA,CAAA;IACN,IAAI,CAACY,OAAO,GAAG,CAAC;IAChBF,YAAY,CAACV,QAAQ,CAAC,IAAI,CAAC;EAC7B;EACAI,UAAUA,CAAA;IACRM,YAAY,CAACN,UAAU,CAAC,IAAI,CAAC;EAC/B"}]}