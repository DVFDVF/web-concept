{"remainingRequest":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/babel-loader/lib/index.js!/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/ts-loader/index.js??ref--15-2!/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/concept/web3-concept/src/games/limbo/game/StarLayer.ts","dependencies":[{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/src/games/limbo/game/StarLayer.ts","mtime":1716171553011},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/babel.config.js","mtime":1716171552917},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/cache-loader/dist/cjs.js","mtime":1716171608994},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/babel-loader/lib/index.js","mtime":1716171609486},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/ts-loader/index.js","mtime":1716171609531},{"path":"/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/eslint-loader/index.js","mtime":1716171609105}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJzsKaW1wb3J0IHsgTUlOX0RJU19GUk9NX0NBUk1FUkEsIE1PVkVfU1BFRUQsIFNUQVJTX0lOX0xBWUVSLCBTVEFSX1JBTkdFLCBWSUVXX0RFRVAgfSBmcm9tICcuL3ByZXNldCc7CmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXJMYXllciB7CiAgY29uc3RydWN0b3IobWF0ZXJpYWwpIHsKICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDsKICAgIHRoaXMuaW5pdFN0YXJzKCk7CiAgfQogIGluaXRTdGFycygpIHsKICAgIGNvbnN0IHN0YXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpOwogICAgY29uc3Qgc3RhcnNWZXJ0aWNlcyA9IFtdOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBTVEFSU19JTl9MQVlFUjsgaSsrKSB7CiAgICAgIGNvbnN0IHggPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBWSUVXX0RFRVAgKiBTVEFSX1JBTkdFICsgVklFV19ERUVQICogTUlOX0RJU19GUk9NX0NBUk1FUkE7CiAgICAgIGNvbnN0IHkgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBWSUVXX0RFRVAgKiBTVEFSX1JBTkdFICsgVklFV19ERUVQICogTUlOX0RJU19GUk9NX0NBUk1FUkE7CiAgICAgIGNvbnN0IHogPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBWSUVXX0RFRVA7CiAgICAgIHN0YXJzVmVydGljZXMucHVzaCh4LCB5LCB6KTsKICAgIH0KICAgIHRoaXMuc3RhcnNWZXJ0aWNlcyA9IHN0YXJzVmVydGljZXM7CiAgICB0aGlzLnN0YXJzUG9zaXRpb24gPSBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShzdGFyc1ZlcnRpY2VzLCAzKTsKICAgIHN0YXJHZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgdGhpcy5zdGFyc1Bvc2l0aW9uKTsKICAgIHRoaXMuc3RhcnMgPSBuZXcgVEhSRUUuUG9pbnRzKHN0YXJHZW9tZXRyeSwgdGhpcy5tYXRlcmlhbCk7CiAgfQogIGFkZFRvU2NlbmUoc2NlbmUsIHopIHsKICAgIHNjZW5lLmFkZCh0aGlzLnN0YXJzKTsKICAgIHRoaXMuc3RhcnMucG9zaXRpb24ueiA9IHo7CiAgICByZXR1cm4gdGhpczsKICB9CiAgZm9yd2FyZCgpIHsKICAgIHRoaXMuc3RhcnMucG9zaXRpb24ueiArPSBNT1ZFX1NQRUVEOwogICAgaWYgKHRoaXMuc3RhcnMucG9zaXRpb24ueiA+IFZJRVdfREVFUCkgewogICAgICB0aGlzLnJlc2V0KCk7CiAgICB9CiAgfQogIHJlc2V0KCkgewogICAgdGhpcy5zdGFycy5wb3NpdGlvbi56ID0gLVZJRVdfREVFUCAqIDI7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhcnNWZXJ0aWNlcy5sZW5ndGg7IGkgKz0gMykgewogICAgICB0aGlzLnN0YXJzVmVydGljZXNbaV0gKz0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogVklFV19ERUVQICogU1RBUl9SQU5HRSArIFZJRVdfREVFUCAqIE1JTl9ESVNfRlJPTV9DQVJNRVJBOwogICAgICB0aGlzLnN0YXJzVmVydGljZXNbaSArIDFdICs9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIFZJRVdfREVFUCAqIFNUQVJfUkFOR0UgKyBWSUVXX0RFRVAgKiBNSU5fRElTX0ZST01fQ0FSTUVSQTsKICAgICAgdGhpcy5zdGFyc1ZlcnRpY2VzW2kgKyAyXSArPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBWSUVXX0RFRVA7CiAgICB9CiAgICB0aGlzLnN0YXJzUG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlOwogIH0KfQ=="},{"version":3,"names":["THREE","MIN_DIS_FROM_CARMERA","MOVE_SPEED","STARS_IN_LAYER","STAR_RANGE","VIEW_DEEP","StarLayer","constructor","material","initStars","starGeometry","BufferGeometry","starsVertices","i","x","Math","random","y","z","push","starsPosition","Float32BufferAttribute","setAttribute","stars","Points","addToScene","scene","add","position","forward","reset","length","needsUpdate"],"sources":["/Users/nuomi/Desktop/项目/concept/web3-concept/node_modules/eslint-loader/index.js??ref--14-0!/Users/nuomi/Desktop/项目/concept/web3-concept/src/games/limbo/game/StarLayer.ts"],"sourcesContent":["import * as THREE from 'three';\nimport {\n  MIN_DIS_FROM_CARMERA,\n  MOVE_SPEED,\n  STARS_IN_LAYER,\n  STAR_RANGE,\n  VIEW_DEEP,\n} from './preset';\n\nexport default class StarLayer {\n  private material: THREE.PointsMaterial;\n  private stars!: THREE.Points;\n  private starsVertices!: number[];\n  private starsPosition!: THREE.Float32BufferAttribute;\n\n  constructor(material: THREE.PointsMaterial) {\n    this.material = material;\n    this.initStars();\n  }\n  initStars() {\n    const starGeometry = new THREE.BufferGeometry();\n    const starsVertices = [];\n    for (let i = 0; i < STARS_IN_LAYER; i++) {\n      const x =\n        (Math.random() - 0.5) * VIEW_DEEP * STAR_RANGE +\n        VIEW_DEEP * MIN_DIS_FROM_CARMERA;\n      const y =\n        (Math.random() - 0.5) * VIEW_DEEP * STAR_RANGE +\n        VIEW_DEEP * MIN_DIS_FROM_CARMERA;\n      const z = (Math.random() - 0.5) * VIEW_DEEP;\n      starsVertices.push(x, y, z);\n    }\n    this.starsVertices = starsVertices;\n    this.starsPosition = new THREE.Float32BufferAttribute(starsVertices, 3);\n    starGeometry.setAttribute('position', this.starsPosition);\n    this.stars = new THREE.Points(starGeometry, this.material);\n  }\n  addToScene(scene: THREE.Scene, z: number) {\n    scene.add(this.stars);\n    this.stars.position.z = z;\n    return this;\n  }\n  forward() {\n    this.stars.position.z += MOVE_SPEED;\n    if (this.stars.position.z > VIEW_DEEP) {\n      this.reset();\n    }\n  }\n  reset() {\n    this.stars.position.z = -VIEW_DEEP * 2;\n    for (let i = 0; i < this.starsVertices.length; i += 3) {\n      this.starsVertices[i] +=\n        (Math.random() - 0.5) * VIEW_DEEP * STAR_RANGE +\n        VIEW_DEEP * MIN_DIS_FROM_CARMERA;\n      this.starsVertices[i + 1] +=\n        (Math.random() - 0.5) * VIEW_DEEP * STAR_RANGE +\n        VIEW_DEEP * MIN_DIS_FROM_CARMERA;\n      this.starsVertices[i + 2] += (Math.random() - 0.5) * VIEW_DEEP;\n    }\n    this.starsPosition.needsUpdate = true;\n  }\n}\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SACEC,oBAAoB,EACpBC,UAAU,EACVC,cAAc,EACdC,UAAU,EACVC,SAAS,QACJ,UAAU;AAEjB,eAAc,MAAOC,SAAS;EAM5BC,YAAYC,QAA8B;IACxC,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,SAAS,EAAE;EAClB;EACAA,SAASA,CAAA;IACP,MAAMC,YAAY,GAAG,IAAIV,KAAK,CAACW,cAAc,EAAE;IAC/C,MAAMC,aAAa,GAAG,EAAE;IACxB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,cAAc,EAAEU,CAAC,EAAE,EAAE;MACvC,MAAMC,CAAC,GACL,CAACC,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAIX,SAAS,GAAGD,UAAU,GAC9CC,SAAS,GAAGJ,oBAAoB;MAClC,MAAMgB,CAAC,GACL,CAACF,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAIX,SAAS,GAAGD,UAAU,GAC9CC,SAAS,GAAGJ,oBAAoB;MAClC,MAAMiB,CAAC,GAAG,CAACH,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAIX,SAAS;MAC3CO,aAAa,CAACO,IAAI,CAACL,CAAC,EAAEG,CAAC,EAAEC,CAAC,CAAC;;IAE7B,IAAI,CAACN,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACQ,aAAa,GAAG,IAAIpB,KAAK,CAACqB,sBAAsB,CAACT,aAAa,EAAE,CAAC,CAAC;IACvEF,YAAY,CAACY,YAAY,CAAC,UAAU,EAAE,IAAI,CAACF,aAAa,CAAC;IACzD,IAAI,CAACG,KAAK,GAAG,IAAIvB,KAAK,CAACwB,MAAM,CAACd,YAAY,EAAE,IAAI,CAACF,QAAQ,CAAC;EAC5D;EACAiB,UAAUA,CAACC,KAAkB,EAAER,CAAS;IACtCQ,KAAK,CAACC,GAAG,CAAC,IAAI,CAACJ,KAAK,CAAC;IACrB,IAAI,CAACA,KAAK,CAACK,QAAQ,CAACV,CAAC,GAAGA,CAAC;IACzB,OAAO,IAAI;EACb;EACAW,OAAOA,CAAA;IACL,IAAI,CAACN,KAAK,CAACK,QAAQ,CAACV,CAAC,IAAIhB,UAAU;IACnC,IAAI,IAAI,CAACqB,KAAK,CAACK,QAAQ,CAACV,CAAC,GAAGb,SAAS,EAAE;MACrC,IAAI,CAACyB,KAAK,EAAE;;EAEhB;EACAA,KAAKA,CAAA;IACH,IAAI,CAACP,KAAK,CAACK,QAAQ,CAACV,CAAC,GAAG,CAACb,SAAS,GAAG,CAAC;IACtC,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACD,aAAa,CAACmB,MAAM,EAAElB,CAAC,IAAI,CAAC,EAAE;MACrD,IAAI,CAACD,aAAa,CAACC,CAAC,CAAC,IACnB,CAACE,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAIX,SAAS,GAAGD,UAAU,GAC9CC,SAAS,GAAGJ,oBAAoB;MAClC,IAAI,CAACW,aAAa,CAACC,CAAC,GAAG,CAAC,CAAC,IACvB,CAACE,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAIX,SAAS,GAAGD,UAAU,GAC9CC,SAAS,GAAGJ,oBAAoB;MAClC,IAAI,CAACW,aAAa,CAACC,CAAC,GAAG,CAAC,CAAC,IAAI,CAACE,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAIX,SAAS;;IAEhE,IAAI,CAACe,aAAa,CAACY,WAAW,GAAG,IAAI;EACvC"}]}